"use strict";(self["webpackChunksortinghat_ui"]=self["webpackChunksortinghat_ui"]||[]).push([[827],{61827:(t,e,r)=>{r.r(e),r.d(e,{default:()=>W});var s=function(){var t=this,e=t._self._c;return e("tasks-table",{attrs:{"fetch-backends":t.fetchBackends,"fetch-tasks":t.fetchTasks,"create-task":t.createTask,"delete-task":t.deleteTask,"edit-task":t.editTask}})},n=[],i=r(47546),a=r(24634),o=r(26223),l=r(299),c=r(69964),u=r(88787),d=r(60872),p=r(66747),h=r(55063),m=r(2808),f=r(53193),v=r(36180),A=r(83477),k=(r(62010),function(){var t=this,e=t._self._c;return e("section",{staticClass:"section"},[e("header",{staticClass:"header"},[e("h1",{staticClass:"title"},[t._v("Synchronization")]),e(f.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(r){var s=r.on;return[e(u.A,t._g({attrs:{color:"primary",depressed:"",small:""}},s),[t._v(" Select source "),e(d.A,{attrs:{color:"white",small:"",right:""}},[t._v("mdi-chevron-down")])],1)]}}])},[t.importers?e(p.A,{attrs:{dense:""}},t._l(t.importers,(function(r,s){return e(h.A,{key:s,on:{click:function(e){return t.openModal(r)}}},[e(m.UZ,[t._v(" "+t._s(r.name)+" ")])],1)})),1):t._e()],1)],1),t.error?e(c.A,{attrs:{text:"",type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e(),t.isLoading?e(v.A,{attrs:{indeterminate:"",color:"primary"}}):e(A.A,{scopedSlots:t._u([{key:"default",fn:function(){return[0===t.tasks.length?e("div",{staticClass:"ma-8"},[e("h3",{staticClass:"text-subtitle-2"},[t._v("No connected sources")]),e("p",{staticClass:"text-body-2"},[t._v(" You can sync identities data from different data sources automatically and periodically. ")])]):t._e(),e("tbody",t._l(t.tasks,(function(r){return e("tr",{key:r.id},[e("td",{staticClass:"pr-6 py-4 pl-8"},[e("p",{staticClass:"subheader mb-0"},[t._v(" "+t._s(r.args.backend_name)+" ")]),r.lastExecution?e("p",{staticClass:"v-list-item__subtitle text--secondary mb-0"},[e(d.A,{staticClass:"mb-1 mr-1",attrs:{color:r.failed?"failed":"finished","aria-label":r.failed?"failed":"finished","aria-hidden":"false",small:""}},[t._v(" "+t._s(r.failed?"mdi-alert":"mdi-check")+" ")]),t._v(" Last sync "+t._s(t.formatDate(r.lastExecution))+" ")],1):t._e()]),e("td",{staticClass:"text-right pr-8"},[e(u.A,{staticClass:"mr-2",attrs:{color:"primary",text:"",small:"",outlined:""},on:{click:function(e){return t.openModal(r.args.backend_name,r)}}},[e(d.A,{attrs:{small:""}},[t._v("mdi-pencil")]),e("span",{staticClass:"d-sr-only"},[t._v("Edit task")])],1),e(u.A,{attrs:{color:"primary",text:"",small:"",outlined:""},on:{click:function(e){return t.deleteItem(r.id)}}},[e(d.A,{attrs:{small:""}},[t._v("mdi-delete")]),e("span",{staticClass:"d-sr-only"},[t._v("Delete task")])],1)],1)])})),0)]},proxy:!0}])}),t.modal.isOpen?e("importer-modal",{attrs:{"is-open":t.modal.isOpen,"create-task":t.createTask,"edit-task":t.editTask,task:t.modal.task,importer:t.modal.importer},on:{"update:open":function(e){t.modal.isOpen=e},"update:tasks":function(e){return t.getTasks()}}}):t._e()],1)}),g=[],b=(r(50113),r(23288),r(26099),r(3698)),_=r(52938),y=r(54414),C=r(48146),x=r(38034),w=r(74355),$=r(2756),S=r(41034),T=r(52708),I=function(){var t=this,e=t._self._c;return e(C.A,{attrs:{"max-width":"450"},on:{"click:outside":function(e){return t.$emit("update:open")}},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[e(b.A,{staticClass:"section"},[e(_.ri,{staticClass:"header title"},[t._v(" Import identities from "+t._s(t.importer.name)+" ")]),e(_.OQ,{staticClass:"mt-3"},[e("h3",{staticClass:"subheader mb-2"},[t._v("Settings")]),t._l(t.form.fields,(function(r,s){return e($.A,{key:s,staticClass:"pa-3"},[e(T.A,{attrs:{label:s,dense:"","hide-details":"",outlined:""},model:{value:t.form.fields[s],callback:function(e){t.$set(t.form.fields,s,e)},expression:"form.fields[field]"}})],1)})),e($.A,[e(y.A,{attrs:{cols:"6"}},[e(w.A,{staticClass:"mt-0",attrs:{dense:""},scopedSlots:t._u([{key:"label",fn:function(){return[e("h3",{staticClass:"subheader"},[t._v("Run script")])]},proxy:!0}]),model:{value:t.form.interval,callback:function(e){t.$set(t.form,"interval",e)},expression:"form.interval"}},[e(x.A,{attrs:{value:0,label:"Once"}}),e(x.A,{attrs:{value:10080,label:"Every week"}}),e(x.A,{attrs:{value:43800,label:"Every month"}}),e(x.A,{attrs:{value:"custom",label:"Custom"}})],1),e(T.A,{staticClass:"ml-8",attrs:{label:"Every",type:"number",suffix:"minutes",dense:"","hide-details":"",outlined:""},model:{value:t.form.customInterval,callback:function(e){t.$set(t.form,"customInterval",e)},expression:"form.customInterval"}})],1)],1),t.error?e(c.A,{staticClass:"ma-5",attrs:{text:"",type:"error"}},[t._v(" "+t._s(t.error)+" ")]):t._e()],2),e(_.SL,[e(S.A),e(u.A,{attrs:{color:"primary",text:""},on:{click:t.onClose}},[t._v(" Cancel ")]),e(u.A,{attrs:{color:"primary",disabled:!t.form.fields.url,depressed:""},on:{click:t.onSave}},[t._v(" Save ")])],1)],1)],1)},B=[],E=r(32362),O=r(7180);r(72712),r(33110);const D={name:"ImporterModal",props:{importer:{type:Object,required:!0},task:{type:Object,required:!0},createTask:{type:Function,required:!0},editTask:{type:Function,required:!0},isOpen:{type:Boolean,default:!1}},data:function(){return{form:{fields:{},interval:this.task.interval||0,customInterval:""},error:null}},methods:{onSave:function(){this.task.id?this.updateTask():this.addTask()},onClose:function(){this.$emit("update:open",!1)},addTask:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r,s,n;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="custom"===t.form.interval?t.form.customInterval:t.form.interval,s=JSON.stringify((0,O.A)({backend_name:t.importer.name},t.form.fields)),e.next=5,t.createTask("import_identities",r,s);case 5:n=e.sent,n&&!n.errors&&(t.$emit("update:open",!1),t.$emit("update:tasks")),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},updateTask:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r,s,n,a;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r="custom"===t.form.interval?t.form.customInterval:t.form.interval,s=JSON.stringify((0,O.A)({backend_name:t.importer.name},t.form.fields)),n={interval:r,params:s},e.next=6,t.editTask(t.task.id,n);case 6:a=e.sent,a&&!a.errors&&(t.$emit("update:open",!1),t.$emit("update:tasks")),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))()},buildForm:function(){var t=this,e=[0,10080,43800],r=this.task.args||{},s=this.importer.args.reduce((function(t,e){return(0,O.A)((0,O.A)({},t),{},(0,E.A)({},e,r[e]))}),{});this.form.fields=s,this.task.interval&&!e.find((function(e){return e===t.task.interval}))&&(this.form.customInterval=this.task.interval,this.form.interval="custom")}},mounted:function(){this.buildForm()}},F=D;var L=r(81656),G=(0,L.A)(F,I,B,!1,null,null,null);const q=G.exports,M={name:"TasksTable",components:{ImporterModal:q},props:{fetchBackends:{type:Function,required:!0},fetchTasks:{type:Function,required:!0},createTask:{type:Function,required:!0},deleteTask:{type:Function,required:!0},editTask:{type:Function,required:!0}},data:function(){return{importers:[],tasks:[],error:null,isLoading:!1,modal:{isOpen:!1,task:{},importer:{}}}},methods:{formatDate:function(t){return t?new Date(t).toLocaleString():"-"},openModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"===typeof t&&(t=this.importers.find((function(e){return e.name===t}))),Object.assign(this.modal,{isOpen:!0,importer:t,task:e})},getBackends:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchBackends();case 3:r=e.sent,t.importers=r.data.identitiesImportersTypes,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getTasks:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoading=!0,e.next=4,t.fetchTasks();case 4:r=e.sent,t.tasks=r.data.scheduledTasks.entities,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.error=t.$getErrorMessage(e.t0);case 11:return e.prev=11,t.isLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[0,8,11,14]])})))()},deleteItem:function(t){var e=this;return(0,a.A)((0,i.A)().mark((function r(){var s;return(0,i.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.deleteTask(t);case 3:s=r.sent,s.data.deleteScheduledTask&&e.getTasks(),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),e.error=e.$getErrorMessage(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}},mounted:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getTasks(),e.next=3,t.getBackends();case 3:case"end":return e.stop()}}),e)})))()}},R=M;var N=(0,L.A)(R,k,g,!1,null,"0a1deaa8",null);const j=N.exports,J={name:"SettingsSync",components:{TasksTable:j},methods:{fetchBackends:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.Kr)(t.$apollo);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},fetchTasks:function(){var t=this;return(0,a.A)((0,i.A)().mark((function e(){var r;return(0,i.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,o.CF)(t.$apollo);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},createTask:function(t,e,r){var s=this;return(0,a.A)((0,i.A)().mark((function n(){var a;return(0,i.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,l.nD)(s.$apollo,t,e,r);case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}),n)})))()},deleteTask:function(t){var e=this;return(0,a.A)((0,i.A)().mark((function r(){var s;return(0,i.A)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,l.I8)(e.$apollo,t);case 2:return s=r.sent,r.abrupt("return",s);case 4:case"end":return r.stop()}}),r)})))()},editTask:function(t,e){var r=this;return(0,a.A)((0,i.A)().mark((function s(){var n;return(0,i.A)().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,(0,l.i4)(r.$apollo,t,e);case 2:return n=s.sent,s.abrupt("return",n);case 4:case"end":return s.stop()}}),s)})))()}}},K=J;var P=(0,L.A)(K,s,n,!1,null,null,null);const W=P.exports},69964:(t,e,r)=>{r.d(e,{A:()=>f});var s=r(7180),n=r(32362),i=(r(74423),r(9375)),a=r(54728),o=r(90569),l=r(30428),c=r(73381),u=r(85471);const d=u.Ay.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}});var p=r(95803),h=r(86988),m=r(4152);const f=(0,p.A)(i.A,l.A,d).extend({name:"v-alert",props:{border:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:function(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:function(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder:function(){if(!this.border)return null;var t={staticClass:"v-alert__border",class:(0,n.A)({},"v-alert__border--".concat(this.border),!0)};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t["class"]["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible:function(){var t=this;if(!this.dismissible)return null;var e=this.iconColor;return this.$createElement(a.A,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:function(){return t.isActive=!1}}},[this.$createElement(o.A,{props:{color:e}},this.closeIcon)])},__cachedIcon:function(){return this.computedIcon?this.$createElement(o.A,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes:function(){var t=(0,s.A)((0,s.A)({},i.A.options.computed.classes.call(this)),{},{"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text});return this.border&&(t["v-alert--border-".concat(this.border)]=!0),t},computedColor:function(){return this.color||this.type},computedIcon:function(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&"$".concat(this.type))},hasColoredIcon:function(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText:function(){return this.text||this.outlined},iconColor:function(){return this.hasColoredIcon?this.computedColor:void 0},isDark:function(){return!(!this.type||this.coloredBorder||this.outlined)||c.A.options.computed.isDark.call(this)}},created:function(){this.$attrs.hasOwnProperty("outline")&&(0,h.q4)("outline","outlined",this)},methods:{genWrapper:function(){var t=[(0,m.$c)(this,"prepend")||this.__cachedIcon,this.genContent(),this.__cachedBorder,(0,m.$c)(this,"append"),this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent:function(){return this.$createElement("div",{staticClass:"v-alert__content"},(0,m.$c)(this))},genAlert:function(){var t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){var e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle:function(){this.isActive=!this.isActive}},render:function(t){var e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},54728:(t,e,r)=>{r.d(e,{A:()=>n});var s=r(88787);const n=s.A},38034:(t,e,r)=>{r.d(e,{A:()=>g});var s=r(14822),n=r(7180),i=(r(62010),r(84691)),a=r(90569),o=r(37126),l=r(17717),c=r(58743),u=r(37515),d=r(77018),p=r(73381),h=r(8944),m=r(4152),f=r(95803),v=r(18041),A=["title"],k=(0,f.A)(l.A,c.A,d.A,(0,u.P)("radioGroup"),p.A);const g=k.extend().extend({name:"v-radio",inheritAttrs:!1,props:{disabled:{type:Boolean,default:null},id:String,label:String,name:String,offIcon:{type:String,default:"$radioOff"},onIcon:{type:String,default:"$radioOn"},readonly:{type:Boolean,default:null},value:{default:null}},data:function(){return{isFocused:!1}},computed:{classes:function(){return(0,n.A)((0,n.A)({"v-radio--is-disabled":this.isDisabled,"v-radio--is-focused":this.isFocused},this.themeClasses),this.groupClasses)},computedColor:function(){if(!this.isDisabled)return h.A.options.computed.computedColor.call(this)},computedIcon:function(){return this.isActive?this.onIcon:this.offIcon},computedId:function(){return o.A.options.computed.computedId.call(this)},hasLabel:o.A.options.computed.hasLabel,hasState:function(){return(this.radioGroup||{}).hasState},isDisabled:function(){var t;return null!==(t=this.disabled)&&void 0!==t?t:!!this.radioGroup&&this.radioGroup.isDisabled},isReadonly:function(){var t;return null!==(t=this.readonly)&&void 0!==t?t:!!this.radioGroup&&this.radioGroup.isReadonly},computedName:function(){return this.name||!this.radioGroup?this.name:this.radioGroup.name||"radio-".concat(this.radioGroup._uid)},rippleState:function(){return h.A.options.computed.rippleState.call(this)},validationState:function(){return(this.radioGroup||{}).validationState||this.computedColor}},methods:{genInput:function(t){return h.A.options.methods.genInput.call(this,"radio",t)},genLabel:function(){return this.hasLabel?this.$createElement(i.A,{on:{click:h.F},attrs:{for:this.computedId},props:{color:this.validationState,focused:this.hasState}},(0,m.$c)(this,"label")||this.label):null},genRadio:function(){var t=this.attrs$,e=(t.title,(0,s.A)(t,A));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(a.A,this.setTextColor(this.validationState,{props:{dense:this.radioGroup&&this.radioGroup.dense}}),this.computedIcon),this.genInput((0,n.A)({name:this.computedName,value:this.value},e)),this.genRipple(this.setTextColor(this.rippleState))])},onFocus:function(t){this.isFocused=!0,this.$emit("focus",t)},onBlur:function(t){this.isFocused=!1,this.$emit("blur",t)},onChange:function(){this.isDisabled||this.isReadonly||this.isActive||this.toggle()},onKeydown:function(){}},render:function(t){var e={staticClass:"v-radio",class:this.classes,on:(0,v.wf)({click:this.onChange},this.listeners$),attrs:{title:this.attrs$.title}};return t("div",e,[this.genRadio(),this.genLabel()])}})},74355:(t,e,r)=>{r.d(e,{A:()=>l});var s=r(7180),n=(r(2892),r(72780),r(37126)),i=r(51878),a=r(95803),o=(0,a.A)(i.C,n.A);const l=o.extend({name:"v-radio-group",provide:function(){return{radioGroup:this}},props:{column:{type:Boolean,default:!0},height:{type:[Number,String],default:"auto"},name:String,row:Boolean,value:null},computed:{classes:function(){return(0,s.A)((0,s.A)({},n.A.options.computed.classes.call(this)),{},{"v-input--selection-controls v-input--radio-group":!0,"v-input--radio-group--column":this.column&&!this.row,"v-input--radio-group--row":this.row})}},methods:{genDefaultSlot:function(){return this.$createElement("div",{staticClass:"v-input--radio-group__input",attrs:{id:this.id,role:"radiogroup","aria-labelledby":this.computedId}},n.A.options.methods.genDefaultSlot.call(this))},genInputSlot:function(){var t=n.A.options.methods.genInputSlot.call(this);return delete t.data.on.click,t},genLabel:function(){var t=n.A.options.methods.genLabel.call(this);return t?(t.data.attrs.id=this.computedId,delete t.data.attrs["for"],t.tag="legend",t):null},onClick:i.C.options.methods.onClick},render:function(t){var e=n.A.options.render.call(this,t);return this._b(e.data,"div",this.attrs$),e}})}}]);