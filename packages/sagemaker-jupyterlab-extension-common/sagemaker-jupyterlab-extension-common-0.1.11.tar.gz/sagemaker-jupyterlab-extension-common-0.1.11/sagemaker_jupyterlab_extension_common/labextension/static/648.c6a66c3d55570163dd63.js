"use strict";(self.webpackChunk_amzn_sagemaker_jupyterlab_extension_common=self.webpackChunk_amzn_sagemaker_jupyterlab_extension_common||[]).push([[648],{648:(e,t,r)=>{r.r(t),r.d(t,{ILogger:()=>b,default:()=>A,logSchemas:()=>i});var o=r(171),a=r(859);const s="@amzn/sagemaker-jupyterlab-extension-common:logger",n=[200,201],i={operationalLogger:{schemaId:"http://sagemaker.studio.jupyterlab.ui.log.schema",schemaVersion:1},performance:{schemaId:"http://sagemaker.studio.jupyterlab.ui.performance.schema",schemaVersion:1}},c=Object.keys(i).map((e=>i[e].schemaId)),d="__INJECT__",m="Cookie Preferences";var h;!function(e){e.POST="POST",e.GET="GET"}(h||(h={}));var l=r(29),p=r.n(l),u=r(937);const g={ShortBreadFooter:r(933).css`
  color: var(--jp-ui-font-color1);
  font-family: var(--jp-ui-font-family);
  font-size: var(--jp-ui-font-size1);
  line-height: 24px;
`},w=()=>((0,l.useEffect)((()=>(()=>{const e=document.createElement("script");e.src="https://prod.assets.shortbread.aws.dev/shortbread.js",e.type="text/javascript",e.async=!0,document.head.appendChild(e),e.onload=()=>window.AWSCShortbreadInstance=(()=>{const e=window.AWSCShortbread({domain:window.location.hostname,hasConsoleNavFooter:!0});return e.checkForCookieConsent(),e})();const t=document.createElement("link");t.href="https://prod.assets.shortbread.aws.dev/shortbread.css",t.rel="stylesheet",document.head.appendChild(t)})()),[]),p().createElement("div",{className:g.ShortBreadFooter},p().createElement("span",{onClick:()=>{const e=window.AWSCShortbreadInstance;e&&e.customizeCookies()},style:{cursor:"pointer"}},m)));class v extends u.ReactWidget{render(){return p().createElement(w,null)}}var f=r(607);const E={id:"@amzn/sagemaker-jupyterlab-extension-common:panorama",autoStart:!0,requires:[f.IStatusBar],activate:(e,t)=>{(async e=>{try{await e.started;const t=document.getElementById("main"),r=await(async(e,t)=>{const r=o.ServerConnection.makeSettings(),s=a.URLExt.join(r.baseUrl,"/aws/sagemaker/api/context");try{const e=await o.ServerConnection.makeRequest(s,{method:t},r);if(!n.includes(e.status))throw new Error("Unable to fetch data");return e}catch(e){throw Error(e)}})(0,h.GET),s=await r.json();if(!t)throw new Error("JupyterLab application or region not found in DOM");((e,t)=>{if(!e)throw new Error("Failed to get region");const r=document.createElement("script"),o=t&&"prod"===t.toLocaleLowerCase()?"Prod":"NonProd";r.src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js",r.id="awsc-panorama-bundle",r.type="text/javascript",r.setAttribute("data-config",`{"appEntity": "aws-sagemaker", "region": "${e}", "service" :"sagemaker-jupyterlab", "domain": "${o}"}`),document.head.appendChild(r)})(s.region,s.stage)}catch(e){}})(e);const r=new v;t.registerStatusItem("@amzn/sagemaker-jupyterlab-extension-common:widget:shortbread-status",{item:r,align:"right",rank:599,isActive:()=>!0})}};var S,y=r(930);!function(e){e.TRACE="TRACE",e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.FATAL="FATAL"}(S||(S={}));const b=new y.Token(s);var k=r(13),C=r(321),x=r.n(C);class I{constructor(e,t,r){this.trace=e=>this.record(e,S.TRACE),this.debug=e=>this.record(e,S.DEBUG),this.info=e=>this.record(e,S.INFO),this.warn=e=>this.record(e,S.WARN),this.error=e=>this.record(e,S.ERROR),this.fatal=e=>this.record(e,S.FATAL),this.child=(e,t)=>{const r=t||this.schema;return new I(this.eventLog,r,{...this.context,...e})},this.eventLog=e,this.schema=t,this.context={...r,AccountId:d,SpaceName:d}}format(e,t){if("Error"in e&&void 0!==e.Error){const r={...e,Name:e.Error.name,Message:e.Error.message,Stack:e.Error.stack,Level:t,Context:this.context};return delete e.Error,r}return{...e,Level:t,Context:this.context}}record(e,t){return this.eventLog.recordEvent({version:this.schema.schemaVersion,schema:this.schema.schemaId,body:this.format(e,t)})}}var j=r(768);const A=[E,{id:s,autoStart:!0,provides:b,activate:e=>{const t={SessionId:(e=>{const t=window.sessionStorage.getItem(e);let r;return null==t?(r={id:(0,k.v4)(),startTime:(new Date).toISOString()},window.sessionStorage.setItem(e,JSON.stringify(r))):r=JSON.parse(t),r})(s).id},r=((e,t,r)=>{const s=[],n=()=>{((e,t)=>{const r=a.PageConfig.getBaseUrl(),s=`${r}aws/sagemaker/api/eventlog`,n=o.ServerConnection.makeSettings({baseUrl:r}),i={method:"POST",body:JSON.stringify({events:e})},c={retries:t,onFailedAttempt:e=>{console.warn({message:`Deliver events attempt (${e.attemptNumber}) with (${e.retriesLeft}) retries remaining.`,error:e})}};x()((async()=>{let e;try{e=await o.ServerConnection.makeRequest(s,i,n)}catch(e){throw e instanceof TypeError&&Object.setPrototypeOf(e,Error.prototype),e}if(!e.ok)throw new Error(e.statusText)}),c).catch((t=>{console.error({message:`Failed to deliver events after (${c.retries}) retries.`,error:t,events:e})}))})(s.splice(0),e)};return setInterval(n,t),(e,t)=>{const o=r-s.length;s.push(...t.slice(0,o)),t.length>o&&(n(),console.log("Logger plugin max buffer size exceeded."))}})(2,5e3,1e4),n=new j.EventLog({allowedSchemas:c,handlers:[r]});return new I(n,i.operationalLogger,t)}}]}}]);