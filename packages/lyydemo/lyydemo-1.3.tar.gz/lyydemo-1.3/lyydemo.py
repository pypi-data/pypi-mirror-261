import qstock as qs
import lyystkcode  # 确保模块存在并正确导入
import numpy as np
import matplotlib.pyplot as plt
import akshare as ak
import pandas as pd
import os

# print(code_list)
os.chdir(r"D:\UserData\resource\data")


def get_1_min_kline_em():
    wmdf1min = ak.stock_zh_a_minute(symbol="sz300554", period="1")
    wmdf1min = wmdf1min.astype({"open": "float", "close": "float", "high": "float", "low": "float"})
    wmdf1min["code"] = "sz300554"
    wmdf1min["avg"] = (wmdf1min["open"] + wmdf1min["close"] + wmdf1min["high"] + wmdf1min["low"]) / 4
    return wmdf1min


def get_1min_data_anywhere():

    df = get_1_min_kline_em()
    if os.path.exists("demo_1min.pkl"):
        df = pd.read_pickle("demo_1min.pkl")
    else:
        df.to_pickle("demo_1min.pkl")
    df["avg"] = df["avg"].round(2)
    return df


def get_1min_data_by_str(debug=False):

    text = """1732,2024-03-08 09:31:00,21.71,22.12,21.71,21.78,664000,sz300554,21.83
    1733,2024-03-08 09:32:00,21.78,21.8,21.45,21.46,603000,sz300554,21.62
    1734,2024-03-08 09:33:00,21.45,21.75,21.43,21.6,445400,sz300554,21.56
    1735,2024-03-08 09:34:00,21.6,21.6,21.42,21.42,356200,sz300554,21.51
    1736,2024-03-08 09:35:00,21.42,21.53,21.39,21.41,381980,sz300554,21.44
    1737,2024-03-08 09:36:00,21.4,21.5,21.37,21.45,327400,sz300554,21.43
    1738,2024-03-08 09:37:00,21.45,21.73,21.43,21.68,141500,sz300554,21.57
    1739,2024-03-08 09:38:00,21.69,21.7,21.43,21.44,96100,sz300554,21.56
    1740,2024-03-08 09:39:00,21.44,21.66,21.4,21.66,161800,sz300554,21.54
    1741,2024-03-08 09:40:00,21.66,21.68,21.57,21.57,100900,sz300554,21.62
    1742,2024-03-08 09:41:00,21.6,21.72,21.52,21.7,154800,sz300554,21.64
    1743,2024-03-08 09:42:00,21.72,21.89,21.7,21.89,151800,sz300554,21.8
    1744,2024-03-08 09:43:00,21.89,22.71,21.84,22.71,185360,sz300554,22.29
    1745,2024-03-08 09:44:00,22.71,23.5,22.67,23.1,835600,sz300554,23.0
    1746,2024-03-08 09:45:00,23.1,23.35,22.9,23.23,422700,sz300554,23.15
    1747,2024-03-08 09:46:00,23.27,23.49,23.0,23.1,501300,sz300554,23.22
    1748,2024-03-08 09:47:00,23.08,23.72,23.08,23.72,475600,sz300554,23.4
    1749,2024-03-08 09:48:00,23.66,23.85,23.31,23.32,512700,sz300554,23.54
    1750,2024-03-08 09:49:00,23.3,23.72,23.2,23.67,252240,sz300554,23.47
    1751,2024-03-08 09:50:00,23.68,23.8,23.47,23.52,508000,sz300554,23.62
    1752,2024-03-08 09:51:00,23.48,23.51,23.22,23.29,162860,sz300554,23.38
    1753,2024-03-08 09:52:00,23.29,23.48,23.22,23.46,139200,sz300554,23.36
    1754,2024-03-08 09:53:00,23.46,23.5,23.22,23.22,151200,sz300554,23.35
    1755,2024-03-08 09:54:00,23.24,23.25,23.03,23.03,100100,sz300554,23.14
    1756,2024-03-08 09:55:00,23.04,23.04,22.88,22.95,124400,sz300554,22.98
    1757,2024-03-08 09:56:00,22.95,23.25,22.94,23.22,135800,sz300554,23.09
    1758,2024-03-08 09:57:00,23.22,23.28,23.09,23.09,76800,sz300554,23.17
    1759,2024-03-08 09:58:00,23.08,23.09,22.9,22.9,45000,sz300554,22.99
    1760,2024-03-08 09:59:00,22.9,23.0,22.82,22.98,87100,sz300554,22.92
    1761,2024-03-08 10:00:00,22.91,23.2,22.89,23.17,55700,sz300554,23.04
    1762,2024-03-08 10:01:00,23.19,23.2,22.88,22.97,86800,sz300554,23.06
    1763,2024-03-08 10:02:00,22.99,23.05,22.97,23.02,66100,sz300554,23.01
    1764,2024-03-08 10:03:00,23.04,23.04,22.91,22.98,40100,sz300554,22.99
    1765,2024-03-08 10:04:00,22.98,23.0,22.94,23.0,22700,sz300554,22.98
    1766,2024-03-08 10:05:00,22.99,23.05,22.98,23.05,60200,sz300554,23.02
    1767,2024-03-08 10:06:00,23.04,23.05,22.95,22.98,56800,sz300554,23.0
    1768,2024-03-08 10:07:00,22.98,22.99,22.9,22.9,52400,sz300554,22.94
    1769,2024-03-08 10:08:00,22.89,22.9,22.85,22.85,53400,sz300554,22.87
    1770,2024-03-08 10:09:00,22.86,22.87,22.8,22.8,90600,sz300554,22.83
    1771,2024-03-08 10:10:00,22.79,22.8,22.62,22.62,62600,sz300554,22.71
    1772,2024-03-08 10:11:00,22.64,22.72,22.61,22.7,66300,sz300554,22.67
    1773,2024-03-08 10:12:00,22.7,22.89,22.7,22.89,60700,sz300554,22.8
    1774,2024-03-08 10:13:00,22.88,22.9,22.83,22.87,52300,sz300554,22.87
    1775,2024-03-08 10:14:00,22.87,22.9,22.86,22.88,56300,sz300554,22.88
    1776,2024-03-08 10:15:00,22.88,22.9,22.88,22.9,41000,sz300554,22.89
    1777,2024-03-08 10:16:00,22.9,22.92,22.86,22.92,60100,sz300554,22.9
    1778,2024-03-08 10:17:00,22.94,23.2,22.94,23.2,77300,sz300554,23.07
    1779,2024-03-08 10:18:00,23.2,23.29,23.2,23.27,95200,sz300554,23.24
    1780,2024-03-08 10:19:00,23.28,23.29,23.06,23.06,84900,sz300554,23.17
    1781,2024-03-08 10:20:00,23.07,23.08,23.0,23.05,38700,sz300554,23.05
    1782,2024-03-08 10:21:00,23.07,23.18,23.07,23.1,34200,sz300554,23.1
    1783,2024-03-08 10:22:00,23.1,23.21,23.1,23.21,53200,sz300554,23.16
    1784,2024-03-08 10:23:00,23.21,23.38,23.21,23.34,78961,sz300554,23.28
    1785,2024-03-08 10:24:00,23.34,23.37,23.27,23.3,192000,sz300554,23.32
    1786,2024-03-08 10:25:00,23.28,23.32,23.25,23.3,72300,sz300554,23.29
    1787,2024-03-08 10:26:00,23.31,23.31,23.25,23.3,75100,sz300554,23.29
    1788,2024-03-08 10:27:00,23.28,23.29,23.25,23.26,33500,sz300554,23.27
    1789,2024-03-08 10:28:00,23.25,23.26,23.2,23.2,55300,sz300554,23.23
    1790,2024-03-08 10:29:00,23.2,23.21,23.08,23.08,24900,sz300554,23.14
    1791,2024-03-08 10:30:00,23.1,23.15,23.05,23.15,26700,sz300554,23.11
    1792,2024-03-08 10:31:00,23.06,23.16,23.06,23.12,20900,sz300554,23.1
    1793,2024-03-08 10:32:00,23.12,23.14,23.07,23.07,28500,sz300554,23.1
    1794,2024-03-08 10:33:00,23.06,23.09,23.04,23.05,26900,sz300554,23.06
    1795,2024-03-08 10:34:00,23.06,23.14,23.06,23.14,26100,sz300554,23.1
    1796,2024-03-08 10:35:00,23.13,23.14,23.06,23.06,37600,sz300554,23.1
    1797,2024-03-08 10:36:00,23.1,23.11,23.07,23.1,51600,sz300554,23.1
    1798,2024-03-08 10:37:00,23.1,23.13,23.1,23.11,32600,sz300554,23.11
    1799,2024-03-08 10:38:00,23.11,23.18,23.1,23.18,53300,sz300554,23.14
    1800,2024-03-08 10:39:00,23.17,23.2,23.16,23.17,39900,sz300554,23.18
    1801,2024-03-08 10:40:00,23.18,23.18,23.11,23.16,33500,sz300554,23.16
    1802,2024-03-08 10:41:00,23.17,23.25,23.16,23.25,65600,sz300554,23.21
    1803,2024-03-08 10:42:00,23.25,23.45,23.25,23.45,140200,sz300554,23.35
    1804,2024-03-08 10:43:00,23.46,23.62,23.46,23.53,253200,sz300554,23.52
    1805,2024-03-08 10:44:00,23.51,23.55,23.38,23.38,63800,sz300554,23.46
    1806,2024-03-08 10:45:00,23.38,23.39,23.3,23.3,41300,sz300554,23.34
    1807,2024-03-08 10:46:00,23.3,23.45,23.26,23.45,51300,sz300554,23.36
    1808,2024-03-08 10:47:00,23.45,23.61,23.45,23.61,105700,sz300554,23.53
    1809,2024-03-08 10:48:00,23.61,23.65,23.5,23.5,128900,sz300554,23.56
    1810,2024-03-08 10:49:00,23.51,23.51,23.43,23.43,87300,sz300554,23.47
    1811,2024-03-08 10:50:00,23.43,23.53,23.41,23.53,61000,sz300554,23.48
    1812,2024-03-08 10:51:00,23.52,23.55,23.52,23.54,74100,sz300554,23.53
    1813,2024-03-08 10:52:00,23.53,23.54,23.4,23.41,61600,sz300554,23.47
    1814,2024-03-08 10:53:00,23.38,23.52,23.37,23.52,78300,sz300554,23.45
    1815,2024-03-08 10:54:00,23.52,23.52,23.38,23.41,47700,sz300554,23.46
    1816,2024-03-08 10:55:00,23.4,23.41,23.26,23.26,42500,sz300554,23.33
    1817,2024-03-08 10:56:00,23.26,23.44,23.26,23.35,72900,sz300554,23.33
    1818,2024-03-08 10:57:00,23.42,23.49,23.36,23.45,42400,sz300554,23.43
    1819,2024-03-08 10:58:00,23.45,23.45,23.3,23.36,40600,sz300554,23.39
    1820,2024-03-08 10:59:00,23.31,23.4,23.3,23.32,20900,sz300554,23.33
    1821,2024-03-08 11:00:00,23.33,23.37,23.27,23.27,36400,sz300554,23.31
    1822,2024-03-08 11:01:00,23.27,23.31,23.26,23.26,29500,sz300554,23.28
    1823,2024-03-08 11:02:00,23.26,23.36,23.26,23.32,36100,sz300554,23.3
    1824,2024-03-08 11:03:00,23.3,23.35,23.3,23.33,12700,sz300554,23.32
    1825,2024-03-08 11:04:00,23.32,23.32,23.3,23.32,29600,sz300554,23.32
    1826,2024-03-08 11:05:00,23.32,23.32,23.3,23.31,11100,sz300554,23.31
    1827,2024-03-08 11:06:00,23.31,23.32,23.22,23.22,53600,sz300554,23.27
    1828,2024-03-08 11:07:00,23.22,23.23,23.06,23.08,36800,sz300554,23.15
    1829,2024-03-08 11:08:00,23.09,23.29,23.09,23.22,27400,sz300554,23.17
    1830,2024-03-08 11:09:00,23.2,23.3,23.2,23.3,8600,sz300554,23.25
    1831,2024-03-08 11:10:00,23.28,23.3,23.26,23.26,15100,sz300554,23.28
    1832,2024-03-08 11:11:00,23.26,23.29,23.26,23.28,18500,sz300554,23.27
    1833,2024-03-08 11:12:00,23.28,23.32,23.28,23.32,23400,sz300554,23.3
    1834,2024-03-08 11:13:00,23.32,23.35,23.32,23.34,35100,sz300554,23.33
    1835,2024-03-08 11:14:00,23.35,23.35,23.33,23.33,31200,sz300554,23.34
    1836,2024-03-08 11:15:00,23.35,23.35,23.33,23.33,19400,sz300554,23.34
    1837,2024-03-08 11:16:00,23.33,23.34,23.28,23.28,29100,sz300554,23.31
    1838,2024-03-08 11:17:00,23.28,23.28,23.27,23.27,6500,sz300554,23.28
    1839,2024-03-08 11:18:00,23.27,23.34,23.27,23.33,12700,sz300554,23.3
    1840,2024-03-08 11:19:00,23.34,23.38,23.33,23.38,33700,sz300554,23.36
    1841,2024-03-08 11:20:00,23.36,23.45,23.35,23.43,31300,sz300554,23.4
    1842,2024-03-08 11:21:00,23.43,23.5,23.4,23.5,51200,sz300554,23.46
    1843,2024-03-08 11:22:00,23.5,23.53,23.45,23.53,40000,sz300554,23.5
    1844,2024-03-08 11:23:00,23.52,23.56,23.45,23.56,63200,sz300554,23.52
    1845,2024-03-08 11:24:00,23.57,23.65,23.56,23.64,202100,sz300554,23.6
    1846,2024-03-08 11:25:00,23.65,23.65,23.57,23.57,50500,sz300554,23.61
    1847,2024-03-08 11:26:00,23.57,23.62,23.57,23.61,76000,sz300554,23.59
    1848,2024-03-08 11:27:00,23.62,23.69,23.61,23.69,75600,sz300554,23.65
    1849,2024-03-08 11:28:00,23.69,23.76,23.69,23.76,77800,sz300554,23.72
    1850,2024-03-08 11:29:00,23.76,23.8,23.72,23.78,120800,sz300554,23.76
    1851,2024-03-08 11:30:00,23.79,23.8,23.78,23.79,81600,sz300554,23.79
    1852,2024-03-08 13:01:00,23.8,23.93,23.78,23.92,295800,sz300554,23.86
    1853,2024-03-08 13:02:00,23.93,23.97,23.8,23.86,123900,sz300554,23.89
    1854,2024-03-08 13:03:00,23.88,23.88,23.66,23.66,68700,sz300554,23.77
    1855,2024-03-08 13:04:00,23.65,23.68,23.55,23.56,49500,sz300554,23.61
    1856,2024-03-08 13:05:00,23.55,23.69,23.51,23.66,57700,sz300554,23.6
    1857,2024-03-08 13:06:00,23.68,23.78,23.67,23.78,44100,sz300554,23.73
    1858,2024-03-08 13:07:00,23.77,23.77,23.69,23.69,42800,sz300554,23.73
    1859,2024-03-08 13:08:00,23.67,23.68,23.61,23.64,26300,sz300554,23.65
    1860,2024-03-08 13:09:00,23.64,23.65,23.61,23.61,23600,sz300554,23.63
    1861,2024-03-08 13:10:00,23.61,23.62,23.6,23.6,58300,sz300554,23.61
    1862,2024-03-08 13:11:00,23.6,23.63,23.6,23.61,29300,sz300554,23.61
    1863,2024-03-08 13:12:00,23.61,23.61,23.5,23.5,45700,sz300554,23.56
    1864,2024-03-08 13:13:00,23.51,23.7,23.43,23.69,81800,sz300554,23.58
    1865,2024-03-08 13:14:00,23.7,23.77,23.68,23.68,31300,sz300554,23.71
    1866,2024-03-08 13:15:00,23.69,23.69,23.65,23.68,25400,sz300554,23.68
    1867,2024-03-08 13:16:00,23.68,23.77,23.68,23.77,19600,sz300554,23.72
    1868,2024-03-08 13:17:00,23.77,23.86,23.74,23.86,60000,sz300554,23.81
    1869,2024-03-08 13:18:00,23.85,23.86,23.74,23.78,41800,sz300554,23.81
    1870,2024-03-08 13:19:00,23.75,23.75,23.72,23.74,38400,sz300554,23.74
    1871,2024-03-08 13:20:00,23.74,23.76,23.72,23.75,36900,sz300554,23.74
    1872,2024-03-08 13:21:00,23.74,23.75,23.72,23.73,28600,sz300554,23.74
    1873,2024-03-08 13:22:00,23.73,23.73,23.67,23.67,31200,sz300554,23.7
    1874,2024-03-08 13:23:00,23.68,23.68,23.63,23.64,20900,sz300554,23.66
    1875,2024-03-08 13:24:00,23.63,23.8,23.63,23.8,60300,sz300554,23.72
    1876,2024-03-08 13:25:00,23.8,23.85,23.75,23.84,65400,sz300554,23.81
    1877,2024-03-08 13:26:00,23.84,23.94,23.83,23.94,99600,sz300554,23.89
    1878,2024-03-08 13:27:00,23.94,23.96,23.9,23.94,103300,sz300554,23.94
    1879,2024-03-08 13:28:00,23.94,23.96,23.9,23.9,51500,sz300554,23.93
    1880,2024-03-08 13:29:00,23.9,23.91,23.85,23.85,39100,sz300554,23.88
    1881,2024-03-08 13:30:00,23.85,24.26,23.85,24.26,383400,sz300554,24.06
    1882,2024-03-08 13:31:00,24.26,24.99,24.26,24.99,303300,sz300554,24.62
    1883,2024-03-08 13:32:00,24.99,25.25,24.97,25.05,348100,sz300554,25.06
    1884,2024-03-08 13:33:00,25.05,25.12,24.59,24.71,114500,sz300554,24.87
    1885,2024-03-08 13:34:00,24.71,25.14,24.71,25.14,149700,sz300554,24.93
    1886,2024-03-08 13:35:00,25.13,25.88,25.12,25.86,219200,sz300554,25.5
    1887,2024-03-08 13:36:00,25.85,26.28,25.85,25.9,343700,sz300554,25.97
    1888,2024-03-08 13:37:00,25.9,25.9,25.43,25.43,119200,sz300554,25.66
    1889,2024-03-08 13:38:00,25.44,25.8,25.37,25.8,169400,sz300554,25.6
    1890,2024-03-08 13:39:00,25.8,26.08,25.77,26.08,136600,sz300554,25.93
    1891,2024-03-08 13:40:00,26.09,26.19,25.5,25.59,160300,sz300554,25.84
    1892,2024-03-08 13:41:00,25.59,25.6,25.28,25.28,93700,sz300554,25.44
    1893,2024-03-08 13:42:00,25.28,25.35,25.13,25.35,98200,sz300554,25.28
    1894,2024-03-08 13:43:00,25.36,25.76,25.36,25.66,88033,sz300554,25.54
    1895,2024-03-08 13:44:00,25.73,25.79,25.52,25.6,88900,sz300554,25.66
    1896,2024-03-08 13:45:00,25.51,25.51,25.25,25.25,53000,sz300554,25.38
    1897,2024-03-08 13:46:00,25.25,25.55,25.15,25.54,91000,sz300554,25.37
    1898,2024-03-08 13:47:00,25.52,25.56,25.3,25.49,134100,sz300554,25.47
    1899,2024-03-08 13:48:00,25.41,25.81,25.4,25.81,106700,sz300554,25.61
    1900,2024-03-08 13:49:00,25.82,26.0,25.81,25.89,98100,sz300554,25.88
    1901,2024-03-08 13:50:00,25.85,25.86,25.49,25.49,58100,sz300554,25.67
    1902,2024-03-08 13:51:00,25.5,25.77,25.5,25.7,72700,sz300554,25.62
    1903,2024-03-08 13:52:00,25.7,26.69,25.7,26.69,1575600,sz300554,26.2
    1904,2024-03-08 13:53:00,26.69,26.69,26.69,26.69,302400,sz300554,26.69
    1905,2024-03-08 13:54:00,26.69,26.69,26.69,26.69,107500,sz300554,26.69
    1906,2024-03-08 13:55:00,26.69,26.69,26.69,26.69,69000,sz300554,26.69
    1907,2024-03-08 13:56:00,26.69,26.69,26.69,26.69,70200,sz300554,26.69
    1908,2024-03-08 13:57:00,26.69,26.69,26.69,26.69,86000,sz300554,26.69
    1909,2024-03-08 13:58:00,26.69,26.69,26.69,26.69,63400,sz300554,26.69
    1910,2024-03-08 13:59:00,26.69,26.69,26.69,26.69,179700,sz300554,26.69
    1911,2024-03-08 14:00:00,26.69,26.69,26.69,26.69,82600,sz300554,26.69
    1912,2024-03-08 14:01:00,26.69,26.69,26.69,26.69,40500,sz300554,26.69
    1913,2024-03-08 14:02:00,26.69,26.69,26.69,26.69,30100,sz300554,26.69
    1914,2024-03-08 14:03:00,26.69,26.69,26.69,26.69,64700,sz300554,26.69
    1915,2024-03-08 14:04:00,26.69,26.69,26.69,26.69,66800,sz300554,26.69
    1916,2024-03-08 14:05:00,26.69,26.69,26.69,26.69,21900,sz300554,26.69
    1917,2024-03-08 14:06:00,26.69,26.69,26.69,26.69,17900,sz300554,26.69
    1918,2024-03-08 14:07:00,26.69,26.69,26.69,26.69,78200,sz300554,26.69
    1919,2024-03-08 14:08:00,26.69,26.69,26.69,26.69,45100,sz300554,26.69
    1920,2024-03-08 14:09:00,26.69,26.69,26.69,26.69,27400,sz300554,26.69
    1921,2024-03-08 14:10:00,26.69,26.69,26.69,26.69,12200,sz300554,26.69
    1922,2024-03-08 14:11:00,26.69,26.69,26.69,26.69,23800,sz300554,26.69
    1923,2024-03-08 14:12:00,26.69,26.69,26.69,26.69,6200,sz300554,26.69
    1924,2024-03-08 14:13:00,26.69,26.69,26.69,26.69,5000,sz300554,26.69
    1925,2024-03-08 14:14:00,26.69,26.69,26.69,26.69,5000,sz300554,26.69
    1926,2024-03-08 14:15:00,26.69,26.69,26.69,26.69,9700,sz300554,26.69
    1927,2024-03-08 14:16:00,26.69,26.69,26.69,26.69,2700,sz300554,26.69
    1928,2024-03-08 14:17:00,26.69,26.69,26.69,26.69,7300,sz300554,26.69
    1929,2024-03-08 14:18:00,26.69,26.69,26.69,26.69,16000,sz300554,26.69
    1930,2024-03-08 14:19:00,26.69,26.69,26.69,26.69,22900,sz300554,26.69
    1931,2024-03-08 14:20:00,26.69,26.69,26.69,26.69,5100,sz300554,26.69
    1932,2024-03-08 14:21:00,26.69,26.69,26.69,26.69,14500,sz300554,26.69
    1933,2024-03-08 14:22:00,26.69,26.69,26.69,26.69,7000,sz300554,26.69
    1934,2024-03-08 14:23:00,26.69,26.69,26.69,26.69,6000,sz300554,26.69
    1935,2024-03-08 14:24:00,26.69,26.69,26.69,26.69,9000,sz300554,26.69
    1936,2024-03-08 14:25:00,26.69,26.69,26.69,26.69,6300,sz300554,26.69
    1937,2024-03-08 14:26:00,26.69,26.69,26.69,26.69,9600,sz300554,26.69
    1938,2024-03-08 14:27:00,26.69,26.69,26.69,26.69,1200,sz300554,26.69
    1939,2024-03-08 14:28:00,26.69,26.69,26.69,26.69,7600,sz300554,26.69
    1940,2024-03-08 14:29:00,26.69,26.69,26.69,26.69,4100,sz300554,26.69
    1941,2024-03-08 14:30:00,26.69,26.69,26.69,26.69,3700,sz300554,26.69
    1942,2024-03-08 14:31:00,26.69,26.69,26.69,26.69,900,sz300554,26.69
    1943,2024-03-08 14:32:00,26.69,26.69,26.69,26.69,18200,sz300554,26.69
    1944,2024-03-08 14:33:00,26.69,26.69,26.69,26.69,21100,sz300554,26.69
    1945,2024-03-08 14:34:00,26.69,26.69,26.69,26.69,5700,sz300554,26.69
    1946,2024-03-08 14:35:00,26.69,26.69,26.69,26.69,8100,sz300554,26.69
    1947,2024-03-08 14:36:00,26.69,26.69,26.69,26.69,42000,sz300554,26.69
    1948,2024-03-08 14:37:00,26.69,26.69,26.69,26.69,8600,sz300554,26.69
    1949,2024-03-08 14:38:00,26.69,26.69,26.69,26.69,6200,sz300554,26.69
    1950,2024-03-08 14:39:00,26.69,26.69,26.69,26.69,13200,sz300554,26.69
    1951,2024-03-08 14:40:00,26.69,26.69,26.69,26.69,1800,sz300554,26.69
    1952,2024-03-08 14:41:00,26.69,26.69,26.69,26.69,6900,sz300554,26.69
    1953,2024-03-08 14:42:00,26.69,26.69,26.69,26.69,2100,sz300554,26.69
    1954,2024-03-08 14:43:00,26.69,26.69,26.69,26.69,4300,sz300554,26.69
    1955,2024-03-08 14:44:00,26.69,26.69,26.69,26.69,6800,sz300554,26.69
    1956,2024-03-08 14:45:00,26.69,26.69,26.69,26.69,8600,sz300554,26.69
    1957,2024-03-08 14:46:00,26.69,26.69,26.69,26.69,11100,sz300554,26.69
    1958,2024-03-08 14:47:00,26.69,26.69,26.69,26.69,10700,sz300554,26.69
    1959,2024-03-08 14:48:00,26.69,26.69,26.69,26.69,2100,sz300554,26.69
    1960,2024-03-08 14:49:00,26.69,26.69,26.69,26.69,2600,sz300554,26.69
    1961,2024-03-08 14:50:00,26.69,26.69,26.69,26.69,4800,sz300554,26.69
    1962,2024-03-08 14:51:00,26.69,26.69,26.69,26.69,7100,sz300554,26.69
    1963,2024-03-08 14:52:00,26.69,26.69,26.69,26.69,12500,sz300554,26.69
    1964,2024-03-08 14:53:00,26.69,26.69,26.69,26.69,12100,sz300554,26.69
    1965,2024-03-08 14:54:00,26.69,26.69,26.69,26.69,17400,sz300554,26.69
    1966,2024-03-08 14:55:00,26.69,26.69,26.69,26.69,5400,sz300554,26.69
    1967,2024-03-08 14:56:00,26.69,26.69,26.69,26.69,9700,sz300554,26.69
    1968,2024-03-08 14:57:00,26.69,26.69,26.69,26.69,9500,sz300554,26.69
    1969,2024-03-08 15:00:00,26.69,26.69,26.69,26.69,24300,sz300554,26.69"""

    # 按行拆分文本并分割数据
    lines = text.strip().split("\n")
    data = [line.split(",") for line in lines]

    # 创建DataFrame
    df = pd.DataFrame(data, columns=["ID", "Timestamp", "Open", "High", "Low", "Close", "Volume", "Symbol", "Last"])

    # 打印DataFrame
    if debug:
        print(df)
    return df


def get_day_df_by_str(debug=False):
    data = [[430510, "2023-10-18", 6.58, 6.72, 6.34, 6.17, 12.0, 2.13, 6.70, 1.82, 5.65, 15, 20231018, 7.6712], [430510, "2023-10-19", 6.34, 6.42, 6.25, 6.08, 3.0, 1.26, 6.42, 1.26, 2.65, 15, 20231019, 7.7000], [430510, "2023-10-20", 6.25, 6.30, 6.22, 6.00, 7.0, 0.80, 6.30, 0.80, 1.27, 15, 20231020, 7.7096], [430510, "2023-10-23", 6.22, 6.22, 5.96, 5.95, 5.0, 0.00, 6.20, -0.32, 4.18, 15, 20231023, 7.7928], [430510, "2023-10-24", 5.96, 6.07, 6.04, 5.94, 7.0, 1.85, 6.07, 1.85, 0.49, 15, 20231024, 7.7672]]
    df = pd.DataFrame(data, columns=["code", "day", "open", "high", "close", "low", "volume", "up", "tenhigh", "chonggao", "huitoubo", "notfull", "dayint", "value"])
    return df


if __name__ == "__main__":
    # code_list = lyystkcode.get_all_codes_dict_em()

    df = get_1min_data_by_str()
    # df = get_1min_data_anywhere()
    print("get 1min data len=", len(df))
    print(df)
