import{ba as S,d as B,R as U,b3 as V,e as L,F as T,an as x,f as O,u as t,c as g,i as s,a as H,j as y,a1 as J,o as f,m as r,bb as j,l as N,p as a,G as _,bc as Q,y as C,bd as X,ac as Y,be as P,ae as h,bf as k,b7 as E,b9 as $}from"./index-5C-xlf_U.js";import{u as G}from"./usePageTitle-ZNb8sWNv.js";class z extends S{parse(l){return JSON.parse(decodeURIComponent(l??""))}format(l){return encodeURIComponent(JSON.stringify(l))}}const K=_("span",null,"Enhanced deployment parameters UI improves support for lists, default values, validation, and more. Enable by updating your prefect config.",-1),W=_("span",null,"To disable the enhanced deployment parameters UI by default update your prefect config.",-1),ee=B({__name:"FlowRunCreate",setup(D){const l=U(),F=V(),m=L("deploymentId"),d=J(),w=T("parameters",z,void 0),{deployment:c}=x(m),v=T("useEnhancedDeploymentParameters",Y,!1),I=async u=>{var p,n;try{const e=await l.deployments.createDeploymentFlowRun(m.value,u),o=((n=(p=u.state)==null?void 0:p.stateDetails)==null?void 0:n.scheduledTime)??void 0,i=!o,R=k(P,{flowRun:e,flowRunRoute:h.flowRun,router:d,immediate:i,startTime:o});E(R,"success"),d.push(h.deployment(m.value))}catch(e){E("Something went wrong trying to create a flow run","error"),console.error(e)}},A=async u=>{var p,n;try{const e=await l.deployments.createDeploymentFlowRunV2(m.value,u),o=((n=(p=u.state)==null?void 0:p.stateDetails)==null?void 0:n.scheduledTime)??void 0,i=!o,R=k(P,{flowRun:e,flowRunRoute:h.flowRun,router:d,immediate:i,startTime:o});E(R,"success"),d.push(h.deployment(m.value))}catch(e){const o=$(e,"Something went wrong trying to create a flow run");E(o,"error"),console.error(e)}},b=()=>{d.back()},M=O(()=>c.value?`Create Flow Run for Deployment: ${c.value.name}`:"Create Flow Run for Deployment");return G(M),(u,p)=>{const n=y("p-link"),e=y("p-message"),o=y("p-code"),i=y("p-layout-default");return t(c)?(f(),g(i,{key:0},{header:s(()=>[r(t(j),{deployment:t(c)},null,8,["deployment"])]),default:s(()=>[t(F).access.schemasV2&&!t(v)?(f(),N(C,{key:0},[r(e,{info:""},{default:s(()=>[a(" The enhanced deployment parameters UI improves support for lists, default values, validation, and more. "),_("strong",null,[a("If you're having trouble, please "),r(n,{href:"https://github.com/PrefectHQ/prefect/issues/new/choose"},{default:s(()=>[a("report an issue.")]),_:1})]),_("span",null,[a(" To revert to the previous deployment parameters UI click "),r(n,{href:"?useEnhancedDeploymentParameters=true",target:"_self"},{default:s(()=>[a("here")]),_:1}),a(".")])]),_:1}),r(t(Q),{deployment:t(c),parameters:t(w),onSubmit:A,onCancel:b},null,8,["deployment","parameters"])],64)):(f(),N(C,{key:1},[t(v)?(f(),g(e,{key:1},{default:s(()=>[_("span",null,[a("To use the enhanced deployment parameters UI click "),r(n,{href:"?useEnhancedDeploymentParameters=false",target:"_self"},{default:s(()=>[a("here")]),_:1}),a(". ")]),W,r(o,{class:"mt-2"},{default:s(()=>[a(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=False ")]),_:1})]),_:1})):(f(),g(e,{key:0},{default:s(()=>[K,r(o,{class:"mt-2"},{default:s(()=>[a(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=True ")]),_:1})]),_:1})),r(t(X),{deployment:t(c),parameters:t(w),onSubmit:I,onCancel:b},null,8,["deployment","parameters"])],64))]),_:1})):H("",!0)}}});export{ee as default};
