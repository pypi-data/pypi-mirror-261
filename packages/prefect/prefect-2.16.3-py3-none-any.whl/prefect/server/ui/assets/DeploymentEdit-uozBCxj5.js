import{d as M,R as w,b3 as B,F,e as L,Q as S,f as g,c as p,i as e,j as c,o,u as s,b4 as U,a as D,l as k,m as a,p as t,G as u,b5 as x,y as T,b6 as H,ac as j,b7 as i,b8 as f,ae as O,b9 as Q}from"./index-5C-xlf_U.js";import{u as X}from"./usePageTitle-ZNb8sWNv.js";const Y=u("span",null,"Enhanced deployment parameters UI improves support for lists, default values, validation, and more. Enable by updating your prefect config.",-1),$=u("span",null,"To disable the enhanced deployment parameters UI by default update your prefect config.",-1),J=M({__name:"DeploymentEdit",setup(G){const y=w(),N=B(),E=F("useEnhancedDeploymentParameters",j,!1),d=L("deploymentId"),P={interval:3e5},h=S(y.deployments.getDeployment,[d.value],P),n=g(()=>h.response);async function A(m){try{await y.deployments.updateDeployment(d.value,m),i("Deployment updated","success"),f.back()}catch(l){i("Error updating deployment","error"),console.warn(l)}}async function C(m){try{await y.deployments.updateDeploymentV2(d.value,m),i("Deployment updated","success"),h.refresh(),f.push(O.deployment(d.value))}catch(l){const r=Q(l,"Error updating deployment");i(r,"error"),console.warn(l)}}function v(){f.back()}const I=g(()=>n.value?`Edit Deployment: ${n.value.name}`:"Edit Deployment");return X(I),(m,l)=>{const r=c("p-link"),_=c("p-message"),b=c("p-code"),R=c("p-content"),V=c("p-layout-default");return o(),p(V,{class:"deployment-edit"},{header:e(()=>[n.value?(o(),p(s(U),{key:0,deployment:n.value},null,8,["deployment"])):D("",!0)]),default:e(()=>[n.value?(o(),p(R,{key:0},{default:e(()=>[s(N).access.schemasV2&&!s(E)?(o(),k(T,{key:0},[a(_,{info:""},{default:e(()=>[t(" The enhanced deployment parameters UI improves support for lists, default values, validation, and more. "),u("strong",null,[t("If you're having trouble, please "),a(r,{href:"https://github.com/PrefectHQ/prefect/issues/new/choose"},{default:e(()=>[t("report an issue.")]),_:1})]),u("span",null,[t(" To revert to the previous deployment parameters UI click "),a(r,{href:"?useEnhancedDeploymentParameters=true",target:"_self"},{default:e(()=>[t("here")]),_:1}),t(".")])]),_:1}),a(s(x),{deployment:n.value,onCancel:v,onSubmit:C},null,8,["deployment"])],64)):(o(),k(T,{key:1},[s(E)?(o(),p(_,{key:1},{default:e(()=>[u("span",null,[t("To use the enhanced deployment parameters UI click "),a(r,{href:"?useEnhancedDeploymentParameters=false",target:"_self"},{default:e(()=>[t("here")]),_:1}),t(". ")]),$,a(b,{class:"mt-2"},{default:e(()=>[t(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=False ")]),_:1})]),_:1})):(o(),p(_,{key:0},{default:e(()=>[Y,a(b,{class:"mt-2"},{default:e(()=>[t(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=True ")]),_:1})]),_:1})),a(s(H),{deployment:n.value,onCancel:v,onSubmit:A},null,8,["deployment"])],64))]),_:1})):D("",!0)]),_:1})}}});export{J as default};
