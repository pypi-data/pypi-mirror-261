var v=(m,c,a)=>new Promise((_,o)=>{var r=t=>{try{i(a.next(t))}catch(s){o(s)}},e=t=>{try{i(a.throw(t))}catch(s){o(s)}},i=t=>t.done?_(t.value):Promise.resolve(t.value).then(r,e);i((a=a.apply(m,c)).next())});import{d as j,j as d,aM as h,b9 as I,a1 as N,aF as R,r as u,o as T,D as b,w as p,b as l,u as k,e as B,Q as E,n as M,t as U,U as x,bb as z,ad as A,R as D,a9 as F,h as K}from"./index-14b8abca.js";import{i as V}from"./icon-1db30626.js";import{u as J,E as O,P as H}from"./chartEditStore-a4d5fbbd.js";import{u as L}from"./project.api-ae97ca93.js";import{u as Q}from"./useSync.hook-42f0cce8.js";import"./plugin-812a83dd.js";import"./chartLayoutStore-63fc123c.js";import"./index-d6726b22.js";import"./SettingItem-5fc132ea.js";/* empty css                                                                      */import"./SettingItemBox-ff5b9ccc.js";import"./CollapseItem.vue_vue_type_script_setup_true_lang-0a7d8ce5.js";import"./index.esm.min-abeaf31b.js";import"./fileTypeEnum-21359a08.js";const $={class:"title"},q=j({__name:"index",setup(m){const c=J(),{dataSyncUpdate:a}=Q(),{FishIcon:_}=V.ionicons5,o=d(!1),r=d(null),e=d(h());I(()=>{e.value=c.getProjectInfo.projectName||""});const i=N(()=>{e.value=e.value.replace(/\s/g,"");const n=e.value.length?e.value:"新项目";return R(`工作空间-${n}`),c.setEditCanvasConfig(O.PROJECT_NAME,n),n}),t=()=>{o.value=!0,A(()=>{r.value&&r.value.focus()})},s=()=>v(this,null,function*(){o.value=!1,c.setProjectInfo(H.PROJECT_NAME,e.value||"");const n=yield L({id:h(),projectName:e.value});n&&n.code===D.SUCCESS?a():F()});return(n,f)=>{const y=u("n-icon"),C=u("n-button"),w=u("n-text"),S=u("n-input"),g=u("n-space");return T(),b(g,null,{default:p(()=>[l(y,{size:"20",depth:3},{default:p(()=>[l(k(_))]),_:1}),l(w,{onClick:t},{default:p(()=>[B(" 工作空间 - "),E(l(C,{secondary:"",size:"tiny"},{default:p(()=>[M("span",$,U(i.value),1)]),_:1},512),[[x,!o.value]])]),_:1}),E(l(S,{ref_key:"inputInstRef",ref:r,size:"small",type:"text",maxlength:"16","show-count":"",placeholder:"请输入项目名称",value:e.value,"onUpdate:value":f[0]||(f[0]=P=>e.value=P),valueModifiers:{trim:!0},onKeyup:z(s,["enter"]),onBlur:s},null,8,["value","onKeyup"]),[[x,o.value]])]),_:1})}}});const le=K(q,[["__scopeId","data-v-4af849d3"]]);export{le as default};
