"use strict";(self.webpackChunkklowd_jupyterlite_extension=self.webpackChunkklowd_jupyterlite_extension||[]).push([[509],{509:(e,t,o)=>{o.r(t),o.d(t,{copyShareableLinkId:()=>d,default:()=>g});var n=o(922),a=o(361),r=o(665),s=o(558),i=o(388),l=o(53);const d="klowd_jupyterlite_extension:klowd-share-link",c="JupyterLab Dark",p={id:"klowd_jupyterlite_extension:plugin",description:"A JupyterLab KLOWD extension.",autoStart:!0,optional:[s.ISettingRegistry,n.IThemeManager,r.IFileBrowserFactory],activate:(e,t,o,r)=>{console.log("JupyterLab extension klowd_jupyterlite_extension is activated!");const{commands:s}=e,{tracker:g}=r;s.addCommand(d,{execute:()=>{const e=g.currentWidget;if(!e)return;const t=a.PageConfig.getShareUrl(),o=Array.from((0,l.filter)(e.selectedItems(),(e=>"directory"!==e.type)));if(!o.length)return;const r=new URL(t);o.forEach((e=>{r.searchParams.append("file",e.path)})),n.Clipboard.copyToSystem(r.href)},isVisible:()=>!!g.currentWidget&&Array.from(g.currentWidget.selectedItems()).length>=1,icon:i.linkIcon.bindprops({stylesheet:"menuItem"}),label:"Копировать ссылку на файл"}),t&&t.load(p.id).then((e=>{console.log("klowd_jupyterlite_extension settings loaded:",e.composite)})).catch((e=>{console.error("Failed to load settings for klowd_jupyterlite_extension.",e)})),window.addEventListener("message",(e=>{"theme"===e.data.type&&(console.log("Plugin message received:",e.data),o.setTheme("light"===e.data.payload?"JupyterLab Light":c))})),o.themeChanged.connect((()=>{const e={type:"theme",payload:o.theme===c?"dark":"light"};window.parent.postMessage(e,"*"),console.log("Message sent to the host:",e)}))}},g=p}}]);