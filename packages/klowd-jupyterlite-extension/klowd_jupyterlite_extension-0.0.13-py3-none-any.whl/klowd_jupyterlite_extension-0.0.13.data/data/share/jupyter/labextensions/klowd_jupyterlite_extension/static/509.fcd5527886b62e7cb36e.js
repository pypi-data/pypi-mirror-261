"use strict";(self.webpackChunkklowd_jupyterlite_extension=self.webpackChunkklowd_jupyterlite_extension||[]).push([[509],{509:(e,t,o)=>{o.r(t),o.d(t,{copyShareableLinkId:()=>d,default:()=>g});var n=o(922),a=o(361),i=o(665),r=o(558),s=o(388),l=o(53);const d="klowd_jupyterlite_extension:klowd-share-link",c="JupyterLab Dark",p={id:"klowd_jupyterlite_extension:plugin",description:"A JupyterLab KLOWD extension.",autoStart:!0,optional:[r.ISettingRegistry,n.IThemeManager,i.IFileBrowserFactory],activate:(e,t,o,i)=>{console.log("JupyterLab extension klowd_jupyterlite_extension is activated!");const{commands:r}=e,{tracker:g}=i;if(r.addCommand(d,{execute:()=>{const e=g.currentWidget;if(!e)return;const t=a.PageConfig.getShareUrl(),o=Array.from((0,l.filter)(e.selectedItems(),(e=>"directory"!==e.type)));if(!o.length)return;const i=new URL(t);o.forEach((e=>{i.searchParams.append("file",e.path)})),n.Clipboard.copyToSystem(i.href)},isVisible:()=>!!g.currentWidget&&Array.from(g.currentWidget.selectedItems()).length>=1,icon:s.linkIcon.bindprops({stylesheet:"menuItem"}),label:"Копировать ссылку на файл"}),t&&t.load(p.id).then((e=>{console.log("klowd_jupyterlite_extension settings loaded:",e.composite)})).catch((e=>{console.error("Failed to load settings for klowd_jupyterlite_extension.",e)})),window!=window.parent){window.addEventListener("message",(e=>{"theme"===e.data.type&&(console.log("Plugin message received:",e.data),o.setTheme("light"===e.data.payload?"JupyterLab Light":c))}));const e=()=>{const e={type:"theme",payload:o.theme===c?"dark":"light"};window.parent.postMessage(e,"*"),console.log("Message sent to the host:",e)};o.themeChanged.connect(e)}}},g=p}}]);