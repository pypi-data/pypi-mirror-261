(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2357],{86054:function(e,t,r){"use strict";var n=r(90849),i=r(90089),a=r(34896),l=r(38687),c=r(24246),o=["title","tooltip","children"];function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.title,r=e.tooltip,n=e.children,s=(0,i.Z)(e,o);return(0,c.jsxs)(a.xu,u(u({borderRadius:"md",border:"1px solid",borderColor:"gray.200"},s),{},{children:[(0,c.jsxs)(a.X6,{as:"h3",fontSize:"sm",fontWeight:"semibold",color:"gray.700",py:4,px:6,backgroundColor:"gray.50",borderRadius:"md",textAlign:"left",children:[t,r?(0,c.jsx)(a.xv,{as:"span",mx:1,children:(0,c.jsx)(l.Z,{label:r})}):void 0]}),(0,c.jsx)(a.Kq,{p:6,spacing:6,children:n})]}))}},56069:function(e,t,r){"use strict";var n=r(90849),i=r(90089),a=r(34896),l=r(29549),c=r(73452),o=r(79894),s=r.n(o),u=r(24246),b=["backPath"];function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.Z=function(e){var t=e.backPath,r=(0,i.Z)(e,b);return(0,u.jsxs)(a.kC,d(d({alignItems:"center",mb:6},r),{},{children:[(0,u.jsx)(s(),{href:t,passHref:!0,children:(0,u.jsx)(l.hU,{"aria-label":"Back",icon:(0,u.jsx)(c.Rp,{}),mr:2,size:"xs",variant:"outline"})}),(0,u.jsx)(s(),{href:t,passHref:!0,children:(0,u.jsx)(a.xv,{as:"a",fontSize:"sm",fontWeight:"500",children:"Back"})})]}))}},24753:function(e,t,r){"use strict";r.d(t,{MA:function(){return u},Vo:function(){return p},t5:function(){return b}});var n=r(90849),i=r(34896),a=r(24246);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o=function(e){var t=e.children;return(0,a.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,a.jsx)("strong",{children:"Success:"})," ",t]})},s=function(e){var t=e.children;return(0,a.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,a.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},b=function(e){var t=(0,a.jsx)(o,{children:e});return c(c({},u),{description:t})},p=function(e){var t=(0,a.jsx)(s,{children:e});return c(c({},u),{description:t,status:"error"})}},38229:function(e,t,r){"use strict";r.d(t,{F:function(){return i},J:function(){return n}});var n=new Map([["overlay","Overlay"],["privacy_center","Privacy center"],["tcf_overlay","TCF overlay"]]),i=new Map([["always_enabled","Always enabled"],["always_disabled","Always disabled"],["enabled_where_required","Enabled where legally required"]])},4344:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return J}});var n=r(34896),i=r(83125),a=r(86677),l=r(51471),c=r(56069),o=r(60709),s=r(90849),u=r(90089),b=r(55732),p=r(97865),d=r(34707),y=r.n(d),v=r(70409),f=r(29549),j=r(34090),_=r(27378),h=r(78624),O=r(24753),x=r(49841),g=r(68301),m=r(16592),P=["created_at","updated_at","version","experience_config_history_id"];function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Z={title:"",description:"",accept_button_label:"",reject_button_label:"",save_button_label:"",regions:[],component:m.re.OVERLAY},R=g.Ry().shape({accept_button_label:g.Z_().label("Accept button label").required(),reject_button_label:g.Z_().required().label("Reject button label"),save_button_label:g.Z_().required().label("Save button label")}),q=g.Ry().shape({title:g.Z_().required().label("Title"),description:g.Z_().required().label("Description"),privacy_policy_link_label:g.Z_().nullable().label("Privacy policy link label"),privacy_policy_url:g.Z_().nullable().trim().url().label("Privacy policy URL")}).concat(R),D=g.Ry().shape({title:g.Z_().required().label("Overlay title"),description:g.Z_().required().label("Overlay description"),acknowledge_button_label:g.Z_().required().label("Acknowledge button label"),privacy_preferences_link_label:g.Z_().required().label("Privacy preferences link label"),banner_title:g.Z_().nullable().label("Banner title"),banner_description:g.Z_().nullable().label("Banner description"),privacy_policy_link_label:g.Z_().nullable().label("Privacy policy link label"),privacy_policy_url:g.Z_().nullable().trim().url().label("Privacy policy URL")}).concat(R),E=function(e){return k(k({},e),{},{banner_title:e.banner_title||null,banner_description:e.banner_description||null,privacy_policy_link_label:e.privacy_policy_link_label||null,privacy_policy_url:e.privacy_policy_url||null})},S=function(e){return k(k({},e),{},{banner_title:e.banner_title||null,banner_description:e.banner_description||null,privacy_policy_link_label:e.privacy_policy_link_label||null,privacy_policy_url:e.privacy_policy_url||null})},A=r(86054),C=r(43139),z=r(38229),L=r(24246),M=function(){return(0,L.jsxs)(A.Z,{title:"Privacy policy link configuration","data-testid":"privacy-policy",children:[(0,L.jsx)(C.j0,{name:"privacy_policy_link_label",label:"Privacy policy link label",variant:"stacked"}),(0,L.jsx)(C.j0,{name:"privacy_policy_url",label:"Privacy policy URL",variant:"stacked"})]})};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var K=(0,h.MM)(m.vp).map((function(e){var t;return B(B({},e),{},{label:null!==(t=z.F.get(e.value))&&void 0!==t?t:e.label})})),T=function(){return(0,L.jsxs)(n.Kq,{spacing:6,children:[(0,L.jsxs)(A.Z,{title:"Overlay & banner configuration","data-testid":"banner-and-preferences-labeling",children:[(0,L.jsx)(C.j0,{label:"Title, displayed on both the overlay and banner",name:"title",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.Ks,{label:"Description, displayed on both the overlay and banner",name:"description",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"Banner title, if different from overlay",name:"banner_title",variant:"stacked"}),(0,L.jsx)(C.Ks,{label:"Banner description, if different from overlay",name:"banner_description",variant:"stacked"}),(0,L.jsx)(C.j0,{label:"\u201cAccept\u201d button label, displayed on both the overlay and banner",name:"accept_button_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"\u201cReject\u201d button label, displayed on both the overlay and banner",name:"reject_button_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"\u201cManage preferences\u201d button label, displayed only on the banner",name:"privacy_preferences_link_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"\u201cSave\u201d button label, displayed only on the overlay",name:"save_button_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"\u201cAcknowledge\u201d button label, displayed only on a notice-only banner",name:"acknowledge_button_label",variant:"stacked",isRequired:!0})]}),(0,L.jsx)(M,{}),(0,L.jsx)(A.Z,{title:"Display configuration","data-testid":"display-configuration",children:(0,L.jsx)(C.AP,{name:"banner_enabled",label:"Banner",options:K,variant:"stacked",isRequired:!0})})]})},N=function(){return(0,L.jsxs)(n.Kq,{spacing:6,children:[(0,L.jsxs)(A.Z,{title:"Consent page text","data-testid":"consent-page-text",children:[(0,L.jsx)(C.j0,{name:"title",label:"Title",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.Ks,{label:"Description",name:"description",variant:"stacked",isRequired:!0})]}),(0,L.jsxs)(A.Z,{title:"Actions","data-testid":"actions",children:[(0,L.jsx)(C.j0,{label:"Save button label",name:"save_button_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"Reject button label",name:"reject_button_label",variant:"stacked",isRequired:!0}),(0,L.jsx)(C.j0,{label:"Accept button label",name:"accept_button_label",variant:"stacked",isRequired:!0})]}),(0,L.jsx)(M,{})]})},Y=["component"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var X=function(e){var t=e.privacyExperience,r=(0,a.useRouter)(),i=(0,v.pm)(),l=t?function(e){var t,r,n,i,a,l,c;return e.created_at,e.updated_at,e.version,e.experience_config_history_id,k(k({},(0,u.Z)(e,P)),{},{title:null!==(t=e.title)&&void 0!==t?t:"",description:null!==(r=e.description)&&void 0!==r?r:"",accept_button_label:null!==(n=e.accept_button_label)&&void 0!==n?n:"",reject_button_label:null!==(i=e.reject_button_label)&&void 0!==i?i:"",save_button_label:null!==(a=e.save_button_label)&&void 0!==a?a:"",regions:null!==(l=e.regions)&&void 0!==l?l:Z.regions,component:null!==(c=e.component)&&void 0!==c?c:Z.component})}(t):Z,c=(0,x.$d)(),s=(0,p.Z)(c,1)[0],d=(0,x.mJ)(),g=(0,p.Z)(d,1)[0],w=(0,_.useMemo)((function(){return!!t}),[t]),R=function(){var e=(0,b.Z)(y().mark((function e(n){var a,l;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w||!t){e.next=7;break}return n.component,l=(0,u.Z)(n,Y),e.next=4,s(E(U(U({},l),{},{id:t.id})));case 4:a=e.sent,e.next=10;break;case 7:return e.next=9,g(S(n));case 9:a=e.sent;case 10:(0,h.D4)(a)?i((0,O.Vo)((0,h.e$)(a.error))):(i((0,O.t5)("Privacy experience ".concat(w?"updated":"created"))),w||r.push(o.w0));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e){var t=e.privacyExperience,r=(0,_.useMemo)((function(){return t.component===m.re.OVERLAY||t.component===m.re.TCF_OVERLAY}),[t.component]),n=(0,_.useMemo)((function(){return r?D:q}),[r]);return{isOverlay:r,validationSchema:n}}({privacyExperience:l}),C=A.validationSchema,z=A.isOverlay;return(0,L.jsx)(j.J9,{initialValues:l,enableReinitialize:!0,onSubmit:R,validationSchema:C,children:function(e){var t=e.dirty,i=e.isValid,a=e.isSubmitting;return(0,L.jsx)(j.l0,{children:(0,L.jsxs)(n.Kq,{spacing:10,children:[z?(0,L.jsx)(T,{}):(0,L.jsx)(N,{}),(0,L.jsxs)(f.hE,{size:"sm",spacing:2,children:[(0,L.jsx)(f.zx,{variant:"outline",onClick:function(){r.back()},children:"Cancel"}),(0,L.jsx)(f.zx,{type:"submit",variant:"primary",size:"sm",isDisabled:a||!t||!i,isLoading:a,"data-testid":"save-btn",children:"Save"})]})]})})}})},J=function(){var e=(0,a.useRouter)(),t="";e.query.id&&(t=Array.isArray(e.query.id)?e.query.id[0]:e.query.id);var r=(0,x.Qv)(t),s=r.data;if(r.isLoading)return(0,L.jsx)(l.Z,{title:"Privacy experience",children:(0,L.jsx)(n.M5,{children:(0,L.jsx)(i.$,{})})});if(!s)return(0,L.jsx)(l.Z,{title:"Privacy experience",children:(0,L.jsxs)(n.xv,{children:["No privacy experience with id ",t," found."]})});var u=s.component===m.re.OVERLAY?"Configure your consent overlay":"Configure your privacy center",b=s.component===m.re.OVERLAY?"Configure the text of your privacy overlay, privacy banner, and the text of the buttons which users will click to accept, reject, manage, and save their preferences.":"Configure this privacy center experience. You can update the text which will display above the privacy notices and choose whether you\u2019d like users to access the privacy center with a link.";return(0,L.jsxs)(l.Z,{title:"Privacy experience ".concat(s.component),children:[(0,L.jsx)(c.Z,{backPath:o.w0}),(0,L.jsx)(n.X6,{fontSize:"2xl",fontWeight:"semibold",mb:4,"data-testid":"header",children:u}),(0,L.jsxs)(n.xu,{width:{base:"100%",lg:"70%"},children:[(0,L.jsx)(n.xv,{fontSize:"sm",mb:8,children:b}),(0,L.jsx)(n.xu,{"data-testid":"privacy-experience-detail-page",children:(0,L.jsx)(X,{privacyExperience:s})})]})]})}},5123:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/consent/privacy-experience/[id]",function(){return r(4344)}])}},function(e){e.O(0,[7751,6842,3452,3453,8301,1728,4400,9774,2888,179],(function(){return t=5123,e(e.s=t);var t}));var t=e.O();_N_E=t}]);