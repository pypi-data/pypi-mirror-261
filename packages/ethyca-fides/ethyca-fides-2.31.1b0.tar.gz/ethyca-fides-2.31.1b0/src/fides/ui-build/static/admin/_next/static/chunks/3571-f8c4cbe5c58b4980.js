"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3571],{29073:function(e,n,t){var r=t(34896),i=t(73452),a=t(24246);n.Z=function(e){var n=e.title,t=e.description,s=e.button;return(0,a.jsxs)(r.Ug,{backgroundColor:"gray.50",border:"1px solid",borderColor:"blue.400",borderRadius:"md",justifyContent:"space-between",py:4,px:6,"data-testid":"empty-state",children:[(0,a.jsx)(i.ii,{alignSelf:"start",color:"blue.400",mt:.5}),(0,a.jsxs)(r.xu,{flexGrow:1,children:[(0,a.jsx)(r.xv,{fontWeight:"bold",fontSize:"sm",mb:1,children:n}),(0,a.jsx)(r.xv,{fontSize:"sm",color:"gray.600",lineHeight:"5",children:t})]}),s]})}},24753:function(e,n,t){t.d(n,{MA:function(){return d},Vo:function(){return p},t5:function(){return u}});var r=t(90849),i=t(34896),a=t(24246);function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var c=function(e){var n=e.children;return(0,a.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,a.jsx)("strong",{children:"Success:"})," ",n]})},l=function(e){var n=e.children;return(0,a.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,a.jsx)("strong",{children:"Error:"})," ",n]})},d={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},u=function(e){var n=(0,a.jsx)(c,{children:e});return o(o({},d),{description:n})},p=function(e){var n=(0,a.jsx)(l,{children:e});return o(o({},d),{description:n,status:"error"})}},23571:function(e,n,t){t.d(n,{Z:function(){return U}});var r=t(90849),i=t(90089),a=t(55732),s=t(97865),o=t(34707),c=t.n(o),l=t(70409),d=t(21084),u=t(29549),p=t(34896),f=t(34090),m=t(27378),v=t(68301),h=t(6848),g=t(90768),b=t(43139),x=t(37761),y=t(44047),j=t(48466),_=t(51745),C=t(1504),O=t(88491),k=t(78624),w=t(24753),S=t(60530),z=t(24246),P=function(e){var n=e.title,t=e.children,r=e.isOpen,i=e.onClose;return(0,z.jsxs)(S.u_,{isOpen:r,onClose:i,isCentered:!0,scrollBehavior:"inside",size:"xl",children:[(0,z.jsx)(S.ZA,{}),(0,z.jsxs)(S.hz,{textAlign:"left",p:0,children:[(0,z.jsx)(S.xB,{p:0,children:(0,z.jsx)(p.xu,{backgroundColor:"gray.50",px:6,py:4,border:"1px",borderColor:"gray.200",borderTopRadius:6,display:"flex",justifyContent:"space-between",alignItems:"center",children:(0,z.jsx)(p.X6,{as:"h3",size:"sm",children:n})})}),(0,z.jsx)(S.fe,{pb:4,overflow:"scroll",children:t})]})]})},V={name:"",consent_use:"",data_use:"",data_categories:["user"],cookieNames:[],cookies:[]},E=[{label:"Analytics",value:"analytics",description:"Provides analytics for activities such as system and advertising performance reporting, insights and fraud detection."},{label:"Essential",value:"essential",description:"Operates the service or product, including legal obligations, support and basic system operations."},{label:"Functional",value:"functional",description:"Used for specific, necessary, and legitimate purposes."},{label:"Marketing",value:"marketing",description:"Enables marketing, promotion, advertising and sales activities for the product, service, application or system."}],D=t(83125),L=t(75846),Z=t(16446),F=function(e){var n=e.index,t=e.isSuggestion,r=e.disabled;(0,L.fd)();var i=(0,h.C)(L.oW),a=t?"complimentary.500":"gray.800",s=(0,f.u6)().values,o=i.filter((function(e){return e.value.split(".")[0]===s.privacy_declarations[n].consent_use}));return(0,z.jsxs)(p.gC,{width:"100%",borderRadius:"4px",border:"1px solid",borderColor:"gray.200",spacing:4,p:4,children:[(0,z.jsx)(b.AP,{label:"Consent category",tooltip:"What is the system using the data for. For example, is it for third party advertising or perhaps simply providing system operations.",name:"privacy_declarations.".concat(n,".consent_use"),options:E,variant:"stacked",isRequired:!0,isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:r}),(0,z.jsx)(b.AP,{label:"Detailed consent category (optional)",tooltip:"Select a more specific consent category",name:"privacy_declarations.".concat(n,".data_use"),options:o,variant:"stacked",isCustomOption:!0,singleValueBlock:!0,textColor:a,isDisabled:!s.privacy_declarations[n].consent_use||r}),(0,z.jsx)(b.VT,{label:"Cookie names",name:"privacy_declarations.".concat(n,".cookieNames"),options:[],variant:"stacked",isMulti:!0,textColor:a,isDisabled:r})]})},R=function(e){var n,t,r=e.showSuggestions,i=e.isCreate,a=e.disabled,s=(0,f.u6)(),o=s.values,c=s.setFieldValue,l=o.vendor_id,d=(0,y.Wp)({vendor_id:l},{skip:!r||null==l}).isLoading,p=(0,h.C)((0,y.cL)(l||""));(0,m.useEffect)((function(){if(r&&o.vendor_id&&null!==p&&void 0!==p&&p.length){var e=p.filter((function(e){return n=e.data_use,E.some((function(e){return e.value===n.split(".")[0]}));var n})).map((function(e){return(0,Z.U)(e)})).map((function(e){var n,t,r;return{name:null!==(n=e.name)&&void 0!==n?n:"",consent_use:e.data_use.split(".")[0],data_use:e.data_use,data_categories:e.data_categories,cookieNames:(null===(t=e.cookies)||void 0===t?void 0:t.map((function(e){return e.name})))||[],cookies:null!==(r=e.cookies)&&void 0!==r?r:[]}}));c("privacy_declarations",e)}else i&&c("privacy_declarations",[V])}),[r,i,o.vendor_id,p,c]);var v=(null===(n=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===n?void 0:n.data_use)===V.data_use&&(null===(t=o.privacy_declarations[o.privacy_declarations.length-1])||void 0===t?void 0:t.consent_use)===V.consent_use;return d?(0,z.jsx)(D.$,{size:"sm",alignSelf:"center"}):(0,z.jsx)(f.F2,{name:"privacy_declarations",render:function(e){return(0,z.jsxs)(z.Fragment,{children:[o.privacy_declarations.map((function(e,n){return(0,z.jsx)(F,{index:n,disabled:a,isSuggestion:r},e.data_use||n)})),(0,z.jsx)(u.zx,{size:"xs",variant:"ghost",colorScheme:"complimentary",onClick:function(){e.push(V)},disabled:v||a,"data-testid":"add-data-use-btn",children:"Add data use +"})]})}})},N=["cookieNames","consent_use"];function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function A(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var G={name:"",vendor_id:void 0,privacy_declarations:[V]},U=function(e){var n=e.buttonLabel,t=e.buttonVariant,r=void 0===t?"primary":t,o=e.onButtonClick,S=(0,l.pm)(),E=(0,d.qY)(),D=E.isOpen,L=E.onOpen,Z=E.onClose,F=(0,h.T)(),I=(0,h.C)(j.cS),U=(0,m.useMemo)((function(){return v.Ry().shape({name:v.Z_().required().label("Vendor name").test("is-unique","",(function(e,n){return!I.map((function(e){return e.name})).some((function(n){return n===e}))||n.createError({message:'You already have a vendor called "'.concat(e,'". Please specify a unique name for this vendor.')})}))})}),[I]),q=(0,g.hz)(),B=q.tcf,M=q.dictionaryService,W=(0,y.Rd)(void 0,{skip:!M}).isLoading,T=(0,h.C)(y.o),H=(0,h.C)(_.gU),Q=(0,j.f7)(),$=(0,s.Z)(Q,1)[0],Y=(0,h.C)(_.bN),J=function(){Z(),F((0,_.b3)("initial")),F((0,_.gQ)(!1))},K=(0,m.useRef)(null),X=K.current?K.current.values.vendor_id:void 0,ee=(0,h.C)((0,y.$e)(X||"")),ne=function(){var e=(0,a.Z)(c().mark((function e(n,t){var r,a,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.privacy_declarations.filter((function(e){return e.consent_use!==V.consent_use})).flatMap((function(e){var n=e.cookieNames.map((function(n){var t=e.cookies.find((function(e){return e.name===n}));return null!==t&&void 0!==t?t:{name:n,path:"/"}})),t=(e.cookieNames,e.consent_use,(0,i.Z)(e,N));return"marketing"!==e.consent_use||e.data_use?A(A({},t),{},{data_use:e.data_use?e.data_use:e.consent_use,cookies:n}):["marketing.advertising.first_party.targeted","marketing.advertising.third_party.targeted"].map((function(e){return A(A({},t),{},{data_use:e,cookies:n})}))})),a=A(A(A({},ee),n),{},{fides_key:(0,x.E)(n.name),system_type:"",privacy_declarations:r}),e.next=4,$(a);case 4:if(s=e.sent,!(0,k.D4)(s)){e.next=8;break}return S((0,w.Vo)((0,k.e$)(s.error))),e.abrupt("return");case 8:S((0,w.t5)("Vendor successfully created!")),t.resetForm(),J();case 11:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),te=function(e){if(M){if(!e)return F((0,_.b3)("hiding")),void F((0,_.gQ)(!1));F((0,_.b3)("showing")),B&&(0,k.cj)(e)===k.c6.GVL?F((0,_.gQ)(!0)):F((0,_.gQ)(!1))}},re="primary"===r?{size:"sm",colorScheme:"primary"}:{size:"xs",variant:"outline"};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(u.zx,A(A({onClick:function(){o?o():L()},"data-testid":"add-vendor-btn"},re),{},{children:n})),(0,z.jsx)(f.J9,{initialValues:G,enableReinitialize:!0,onSubmit:ne,validationSchema:U,innerRef:K,children:function(e){var n=e.dirty,t=e.isValid,r=e.resetForm;return(0,z.jsx)(P,{isOpen:D,onClose:J,title:"Add a vendor",children:(0,z.jsxs)(p.xu,{"data-testid":"add-vendor-modal-content",my:4,children:[H?(0,z.jsx)(C.Z,{}):null,(0,z.jsx)(f.l0,{children:(0,z.jsxs)(p.gC,{alignItems:"start",spacing:6,children:[M?(0,z.jsx)(O.Z,{label:"Vendor name",options:T,onVendorSelected:te,isCreate:!0,lockedForGVL:H}):(0,z.jsx)(b.j0,{id:"name",name:"name",isRequired:!0,label:"Vendor name",tooltip:"Give the system a unique, and relevant name for reporting purposes. e.g. \u201cEmail Data Warehouse\u201d",variant:"stacked"}),(0,z.jsx)(R,{showSuggestions:"showing"===Y,isCreate:!0,disabled:H}),(0,z.jsxs)(u.hE,{size:"sm",width:"100%",justifyContent:"space-between",children:[(0,z.jsx)(u.zx,{variant:"outline",onClick:function(){J(),r()},children:"Cancel"}),(0,z.jsx)(u.zx,{type:"submit",variant:"primary",isDisabled:W||!n||!t,isLoading:W,"data-testid":"save-btn",children:"Save vendor"})]})]})})]})})}})]})}},37761:function(e,n,t){t.d(n,{E:function(){return r}});var r=function(e){return e.toLowerCase().replace(/ /g,"_").replace(/[^a-zA-Z0-9._<>-]/g,"")}},1504:function(e,n,t){var r=t(34896),i=t(29073),a=t(24246);n.Z=function(){return(0,a.jsx)(r.xu,{mb:"6",maxW:"720px","data-testid":"locked-for-GVL-notice",children:(0,a.jsx)(i.Z,{title:"This system is part of the TCF Global Vendor List (GVL)",description:(0,a.jsxs)(a.Fragment,{children:["As a result, the system fields are not editable as they come directly from Fides Compass and the Global Vendor List (GVL). In some cases where the legal basis has been declared to be flexible, you may update the legal basis for particular data uses."," ",(0,a.jsx)(r.rU,{href:"https://fid.es/tcf_gvl",isExternal:!0,color:"complimentary.500",children:"For more information on the Global Vendor List, click here."})]})})})}},88491:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(97865),i=t(90089),a=t(90849),s=t(34896),o=t(29470),c=t(29549),l=t(92975),d=t(93235),u=t(89543),p=t(6719),f=t(34090),m=t(27378),v=t(6848),h=t(43139),g=t(13018),b=t(24246),x=(0,g.IU)({displayName:"CompassIcon",viewBox:"0 0 512 512",path:(0,b.jsx)("path",{fill:"currentColor",d:"M464 256A208 208 0 1 0 48 256a208 208 0 1 0 416 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm306.7 69.1L162.4 380.6c-19.4 7.5-38.5-11.6-31-31l55.5-144.3c3.3-8.5 9.9-15.1 18.4-18.4l144.3-55.5c19.4-7.5 38.5 11.6 31 31L325.1 306.7c-3.2 8.5-9.9 15.1-18.4 18.4zM288 256a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"})}),y=t(38687),j=t(51745),_=["children"];function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function O(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var k=function(e){var n=e.active,t=e.disabled,r=e.onRefreshSuggestions,i={bg:n?"complimentary.500":"gray.100"};return(0,b.jsxs)(s.gC,{children:[(0,b.jsx)(s.LZ,{minHeight:"18px"}),(0,b.jsxs)(o.v2,{children:[(0,b.jsx)(o.j2,O({as:c.hU,size:"sm",isDisabled:t,icon:(0,b.jsx)(x,{color:n?"white":"gray.700",boxSize:4}),"aria-label":"Update information from Compass","data-testid":"refresh-suggestions-btn",_hover:{_disabled:i}},i)),(0,b.jsx)(o.qy,{children:(0,b.jsx)(o.sN,{onClick:r,children:(0,b.jsx)(s.xv,{fontSize:"xs",lineHeight:4,children:"Reset to Compass defaults"})})})]})]})},w=function(e){e.children;var n=(0,i.Z)(e,_);return(0,b.jsx)(u.Z.Option,O(O({},n),{},{type:"option",children:(0,b.jsxs)(s.kC,{flexDirection:"column",padding:2,children:[(0,b.jsx)(s.xv,{color:"gray.700",fontSize:"14px",lineHeight:5,fontWeight:"medium",children:n.data.label}),n.data.description?(0,b.jsx)(s.xv,{color:"gray.500",fontSize:"12px",lineHeight:4,fontWeight:"normal",children:n.data.description}):null]})}))},S=function(e){var n,t,i=e.label,a=e.isCreate,o=e.lockedForGVL,c=e.options,u=e.onVendorSelected,g=(0,v.C)(j.bN),x=(0,f.U$)({name:"name"}),_=(0,r.Z)(x,3),C=_[0],S=_[1],z=_[2].setValue,P=!(!S.touched||!S.error),V=O(O({},C),{},{value:null!==(n=C.value)&&void 0!==n?n:""}),E=(0,f.u6)(),D=E.touched,L=E.values,Z=E.setTouched,F=E.setFieldValue,R=E.validateForm,N=null!==(t=c.find((function(e){return e.value===V.value})))&&void 0!==t?t:{label:V.value,value:V.value,description:""},I=(0,m.useState)(""),A=I[0],G=I[1],U=c.filter((function(e){return e.label.toLowerCase().startsWith(A.toLowerCase())})),q=!V.value&&!L.vendor_id,B=!!A&&U.length>0,M=o&&!a;(0,m.useEffect)((function(){R()}),[q,R]);var W=function(){z(""),G(""),F("vendor_id",void 0),u(void 0)},T=(0,b.jsx)(l.NI,{isInvalid:P,isRequired:!0,width:"100%",children:(0,b.jsxs)(s.gC,{alignItems:"start",position:"relative",width:"100%",children:[(0,b.jsxs)(s.Ug,{spacing:1,children:[(0,b.jsx)(h.__,{htmlFor:"name",fontSize:"xs",my:0,mr:1,children:i}),(0,b.jsx)(y.Z,{label:"Enter the system name"})]}),(0,b.jsx)(s.xu,{width:"100%","data-testid":"input-name",children:(0,b.jsx)(p.Z,{name:"name",id:"name",options:U,isRequired:!0,value:N,onBlur:function(e){V.onBlur(e),A&&z(A),Z(O(O({},D),{},{name:!0}),!A)},onChange:function(e,n){return function(e,n){if("clear"!==n.action){if(z(e?e.label:""),Z(O(O({},D),{},{vendor_id:!0,name:!0}),"create-option"!==n.action),e){var t=c.some((function(n){return n.value===e.value}))?e.value:void 0;F("vendor_id",t),u(t)}}else W()}(e,n)},onInputChange:function(e){return G(e)},inputValue:A,size:"sm",onKeyDown:function(e){"Tab"===e.key&&A&&U.length>0&&A!==U[0].label&&(G(U[0].label),z(U[0].value))},tabSelectsValue:B,classNamePrefix:"custom-select",placeholder:"Enter system name...",instanceId:"select-name",isDisabled:M,menuPosition:"absolute",isSearchable:!0,isClearable:!!A,focusBorderColor:"primary.600",formatCreateLabel:function(e){return'Create new system "'.concat(e,'"...')},chakraStyles:{container:function(e){return O(O({},e),{},{flexGrow:1,backgroundColor:"white"})},option:function(e,n){return O(O({},e),{},{background:n.isSelected||n.isFocused?"gray.50":"unset"})},dropdownIndicator:function(e){return O(O({},e),{},{display:"none"})},indicatorSeparator:function(e){return O(O({},e),{},{display:"none"})}},components:{Option:w}})}),(0,b.jsx)(h.Bc,{isInvalid:P,message:S.error,fieldName:"name"}),(0,b.jsxs)(s.xv,{"aria-hidden":!0,position:"absolute",backgroundColor:"transparent",style:{marginTop:"31.52px",marginLeft:"13px"},pointerEvents:"none",zIndex:1,fontSize:"sm",children:[(0,b.jsx)(s.xv,{as:"span",color:"transparent",children:A}),A&&U.length>0?(0,b.jsx)(s.xv,{as:"span",color:"complimentary.500",children:U[0].label.substring(A.length)}):null]})]})});return(0,b.jsxs)(s.Ug,{alignItems:"flex-start",width:"full",children:[q?T:(0,b.jsx)(h.j0,{id:"name",name:"name",label:"System name",tooltip:"Enter the system name",variant:"stacked",disabled:M,isRequired:!0,inputRightElement:M?null:(0,b.jsx)(d.P,{onClick:W,size:"sm","data-testid":"clear-btn"})}),(0,b.jsx)(k,{active:!!L.vendor_id||B,disabled:!L.vendor_id||"showing"===g,onRefreshSuggestions:function(){return u(L.vendor_id)}})]})}},16446:function(e,n,t){t.d(n,{U:function(){return r}});var r=function(e){var n,t=e.data_categories.flatMap((function(e){return e.split(",")}));return{data_use:e.data_use,data_categories:t,features:e.features,legal_basis_for_processing:e.legal_basis_for_processing,flexible_legal_basis_for_processing:e.flexible_legal_basis_for_processing,retention_period:e.retention_period?e.retention_period:"",cookies:null===(n=e.cookies)||void 0===n?void 0:n.map((function(e){return{name:e.name,domain:e.domain,path:e.path}}))}}}}]);