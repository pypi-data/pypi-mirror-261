import{r as u,o as Y,j as l,c as v,s as T,z as q,h as d,R as J,P as Q,q as V}from"./index-756a9c57.js";import{I as C}from"./Input-cad048fe.js";import{w as M,x as W}from"./transition-d4307333.js";const g="",R=40;function F(t,n){return t.replaceAll(n,`<b class="inline-block text-brand-500 bg-brand-10">${n}</b>`)}function X(t=[],n){return n=n.toLocaleLowerCase(),t.reduce((a,[r,s])=>{const o=s.toLocaleLowerCase().indexOf(n);if(o<0)return a;if(s.length<R)a.push([r,s]);else{const c=Math.max(0,o-R),f=Math.min(s.length-1,o+n.length+R);a.push([r,`${c>0?"...":g}${s.slice(c,f)}${f<s.length?"...":g}`])}return a},[])}function $({nativeEvent:t}){return window.TouchEvent?t instanceof TouchEvent:"touches"in t}function K(t){return t.nativeEvent instanceof MouseEvent}function Z(t){const n=u.useRef(null),a=u.useRef(t);return u.useLayoutEffect(()=>{a.current=t}),u.useEffect(()=>{const r=s=>{const o=n.current;o&&!o.contains(s.target)&&a.current(s)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}},[]),n}function re(t,n={}){const{threshold:a=400,onStart:r,onFinish:s,onCancel:o}=n,c=u.useRef(!1),f=u.useRef(!1),h=u.useRef();return u.useMemo(()=>{if(typeof t!="function")return{};const w=m=>{!K(m)&&!$(m)||(r&&r(m),f.current=!0,h.current=setTimeout(()=>{t(m),c.current=!0},a))},p=m=>{!K(m)&&!$(m)||(c.current?s&&s(m):f.current&&o&&o(m),c.current=!1,f.current=!1,h.current&&window.clearTimeout(h.current))};return{...{onMouseDown:w,onMouseUp:p,onMouseLeave:p},...{onTouchStart:w,onTouchEnd:p}}},[t,a,o,s,r])}const B=J.forwardRef(function({value:n,type:a,placeholder:r,size:s=d.md,autoFocus:o=!1,onInput:c,onKeyDown:f,className:h},w){return l.jsx(C,{className:h,size:s,children:({className:p})=>l.jsx(C.Textfield,{ref:w,type:a,className:v(p,"w-full"),autoFocus:o,placeholder:r,value:n,onInput:c,onKeyDown:f})})});function se({list:t,size:n=d.md,searchBy:a,displayBy:r,descriptionBy:s,onSelect:o,to:c,placeholder:f="Search",autoFocus:h=!1,showIndex:w=!0,isFullWidth:p=!1,isLoading:S=!1,direction:k="bottom",className:m,onInput:E}){const O=Y(),A=u.useRef(null),D=u.useRef(null),U=u.useMemo(()=>t.map(e=>[e,e[a]]),[t,a]),[L,j]=u.useState(g),[x,b]=u.useState(0),G=Z(()=>{j(g)}),I=L!==g,N=X(U,L);function P(){var e;b(0),j(g),(e=D.current)==null||e.focus()}function H(){var i;const e=(i=N[x])==null?void 0:i[0];T(e)||(T(c)?o==null||o(e):O(c(e)),P())}return l.jsx("div",{className:v("px-2 py-1 relative",m),ref:G,onKeyDown:e=>{e.key==="Escape"&&P()},children:l.jsxs(M,{className:"relative flex w-full",children:[l.jsx(M.Button,{ref:D,as:B,className:"w-full !m-0",type:"search",size:n,value:L,placeholder:f,onInput:e=>{const i=e.target.value.trim();j(i),E==null||E(i)},onKeyDown:e=>{var i;(e.key==="ArrowDown"||e.key==="ArrowUp")&&((i=A.current)==null||i.focus())},autoFocus:h}),l.jsx(W,{show:I,as:u.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:l.jsx(M.Panel,{static:!0,focus:!0,className:v("absolute z-50 right-0 transform cursor-pointer rounded-lg bg-theme border-2 border-neutral-200","p-2 bg-theme dark:bg-theme-lighter overflow-auto hover:scrollbar scrollbar--vertical scrollbar--horizontal shadow-2xl",k==="top"?"top-0":"bottom-10",n===d.sm&&"mt-7 max-h-[30vh]",n===d.md&&"mt-9 max-h-[40vh]",n===d.lg&&"mt-12 max-h-[50vh]",p?"w-full":"w-full max-w-[20rem]"),ref:A,onKeyDown:e=>{e.key==="ArrowUp"&&x>0&&b(x-1),e.key==="ArrowDown"&&x<N.length-1&&b(x+1),e.key==="Enter"&&(e.preventDefault(),H())},onMouseOver:e=>{e.stopPropagation();const i=e.target.closest('[role="menuitem"]');if(T(i))return;const y=Number(i.dataset.index);b(Number(y))},children:q(N)&&I?l.jsx("div",{className:v(n===d.sm&&"p-1",n===d.md&&"p-2",n===d.lg&&"p-3"),children:S?"Loading...":"No Results Found"},"not-found"):N.map(([e,i],y)=>l.jsx("div",{role:"menuitem","data-index":y,className:v("cursor-pointer rounded-lg",x===y&&"bg-neutral-5"),children:l.jsx(z,{item:e,index:i,search:L,displayBy:r,descriptionBy:s,size:n,showIndex:w,onClick:_=>{_.stopPropagation(),_.preventDefault(),H()}})},e[a]))})})]})})}function z({item:t,index:n,search:a,displayBy:r,descriptionBy:s,size:o,showIndex:c=!0,onClick:f}){return l.jsxs("div",{onClick:f,className:v("font-normal w-full overflow-hidden whitespace-nowrap overflow-ellipsis px-2",o===d.sm&&"text-xs py-1",o===d.md&&"text-sm py-2",o===d.lg&&"text-md py-3"),children:[c?l.jsxs(l.Fragment,{children:[l.jsx("span",{title:t[r],className:"font-bold",children:Q(t[r],50,20)}),l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",dangerouslySetInnerHTML:{__html:F(n,a)}})]}):l.jsx("span",{title:t[r],className:"font-bold",dangerouslySetInnerHTML:{__html:F(t[r],a)}}),V(s)&&l.jsx("small",{className:"block text-neutral-600 italic overflow-hidden whitespace-nowrap overflow-ellipsis",children:t[s]})]})}export{se as S,re as u};
