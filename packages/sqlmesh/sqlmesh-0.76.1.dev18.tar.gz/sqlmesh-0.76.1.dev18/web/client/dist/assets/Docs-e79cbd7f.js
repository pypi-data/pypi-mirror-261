import{a as N,Z as E,r as P,j as e,a0 as v,V as C,c as h,e as F,a1 as L,d as Q,i as T,P as z,Q as O,s as R,w as x,U as A,E as g}from"./index-71398e80.js";import{M as I,u as B,L as H,C as $,a as y}from"./context-c9a4c85e.js";import{v as p,M as k,P as q}from"./disclosure-1c14d4dc.js";import U from"./ModelLineage-9a36c7db.js";import{S as D}from"./SplitPane-7aa47462.js";import{r as f,T as V}from"./Tab-86c3a5e2.js";import{E as _}from"./file-49f2b60f.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./Input-0c327896.js";import"./editor-7738dbd6.js";import"./project-1647c629.js";import"./transition-7cc1de49.js";import"./ListboxShow-097350f3.js";import"./SearchList-b383624c.js";const w=function({model:s,withModel:i=!0,withDescription:n=!0,withColumns:a=!0,withCode:d=!0,withQuery:o=!0}){const u=N(r=>r.setLastSelectedModel),{refetch:t,cancel:c}=E(s.name);return P.useEffect(()=>(t().then(({data:r})=>{s.update(r),u(s)}),()=>{c()}),[s.name]),e.jsxs(b,{children:[i&&e.jsx(j,{headline:"Model",defaultOpen:!0,children:e.jsxs("ul",{className:"w-full",children:[e.jsx(m,{name:"Path",value:s.path.split(v).slice(0,-1).join(v)}),e.jsx(m,{name:"Name",title:s.displayName,value:C(s.displayName,50,25)}),e.jsx(m,{name:"Dialect",value:s.dialect}),e.jsx(m,{name:"Type",value:s.type}),Object.entries(s.details??{}).map(([r,S])=>e.jsx(m,{name:r.replaceAll("_"," "),value:S,isCapitalize:!0},r))]})}),n&&e.jsx(j,{headline:"Description",defaultOpen:!0,children:s.description??"No description"}),a&&e.jsx(j,{headline:"Columns",defaultOpen:!0,children:e.jsx(I,{className:"max-h-[15rem]",nodeId:s.name,columns:s.columns,disabled:s.isModelPython,withHandles:!1,withSource:!1,withDescription:!0,limit:10})})]})};function G({headline:l}){return e.jsx("div",{className:"text-md font-bold whitespace-nowrap w-full",id:l,children:e.jsx("h3",{className:"py-2",children:l})})}function Z(){return e.jsx(b,{className:"font-bold whitespace-nowrap w-full h-full",children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function b({children:l,className:s}){return e.jsx("div",{className:h("w-full h-full rounded-xl",s),children:e.jsx("div",{className:"w-full h-full rounded-xl",children:e.jsx("div",{className:"w-full h-full overflow-scroll scrollbar scrollbar--vertical scrollbar--horizontal",children:l})})})}function j({children:l,className:s,headline:i,defaultOpen:n=!1}){return e.jsx("div",{className:"px-1 text-neutral-500 dark:text-neutral-400",children:e.jsx(p,{defaultOpen:n,children:({open:a})=>e.jsxs(e.Fragment,{children:[e.jsxs(p.Button,{className:h("flex items-center justify-between rounded-lg text-left w-full hover:bg-neutral-5 px-3 mb-1 overflow-hidden",s),children:[e.jsx(G,{headline:i}),e.jsx("div",{children:a?e.jsx(k,{className:"w-4 text-neutral-50"}):e.jsx(q,{className:"w-4 text-neutral-50"})})]}),e.jsx(p.Panel,{className:"pb-2 px-2 overflow-hidden",children:e.jsx("div",{className:"px-2 mb-2 text-xs",children:l})})]})})})}function m({className:l,name:s,value:i,isHighlighted:n=!1,isCapitalize:a=!1,children:d,title:o}){return e.jsxs("li",{className:h("w-full border-b last:border-b-0 border-neutral-10 py-1 mb-1 text-neutral-500 dark:text-neutral-400",l),children:[F(i)?e.jsxs(e.Fragment,{children:[e.jsx("strong",{title:o,className:"mr-2 text-xs capitalize",children:s}),i.map((u,t)=>e.jsx("ul",{className:"w-full flex flex-col whitespace-nowrap p-1 m-1 rounded-md overflow-hidden",children:Object.entries(u).map(([c,r])=>e.jsxs("li",{className:"flex items-center justify-between text-xs border-b border-neutral-10 last:border-b-0 py-1",children:[e.jsxs("strong",{className:"mr-2",children:[c,":"]}),e.jsx("p",{className:"text-xs",children:M(r)})]},c))},t))]}):e.jsxs("div",{className:"flex justify-between text-xs whitespace-nowrap",children:[e.jsx("strong",{className:h("mr-2",a&&"capitalize",n&&"text-brand-500"),children:s}),e.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:M(i)})]}),e.jsx("p",{className:"text-xs ",children:d})]})}w.NotFound=Z;w.Container=b;const J=w;function M(l){const s=new Date(l),i=L(l)&&!isNaN(s.getTime()),n=typeof l=="boolean";return n&&Q(l)?"True":n&&T(l)?"False":i?z(s):String(l)}function de(){const{modelName:l}=O(),s=R(),i=N(t=>t.models),n=N(t=>t.lastSelectedModel),a=x(l)||l===(n==null?void 0:n.name)?n:i.get(encodeURI(l)),d=x(a)?[]:B(a.path,t=>{o==null||o(t.name)});function o(t){const c=i.get(t);x(c)||s(g.DocsModels+"/"+c.name)}function u(t){console.log(t==null?void 0:t.message)}return e.jsx("div",{className:"flex overflow-auto w-full h-full",children:x(a)?e.jsx(A,{link:g.Docs,description:x(l)?void 0:`Model ${l} Does Not Exist`,message:"Back To Docs"}):e.jsx(H,{showColumns:!0,handleClickModel:o,handleError:u,children:e.jsxs(D,{className:"flex h-full w-full",sizes:[65,35],minSize:0,snapOffset:0,children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs(D,{direction:"vertical",sizes:[50,50],minSize:0,snapOffset:0,className:"flex flex-col w-full h-full overflow-hidden",children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsx($,{path:a.path,children:({file:t})=>e.jsxs(f.Group,{children:[e.jsx(V,{list:["Source Code",a.isModelSQL&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),e.jsxs(f.Panels,{className:"h-full w-full overflow-hidden text-xs",children:[e.jsx(f.Panel,{unmount:!1,className:"w-full h-full",children:e.jsx(y,{content:t.content,type:t.extension,extensions:d})}),a.isModelSQL&&e.jsx(f.Panel,{className:"w-full h-full",children:e.jsx(y,{type:_.SQL,content:a.sql??"",extensions:d})})]})]})},a.path)}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(U,{model:a})})]})}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(J,{model:a,withQuery:a.isModelSQL})})]})})})}export{de as default};
