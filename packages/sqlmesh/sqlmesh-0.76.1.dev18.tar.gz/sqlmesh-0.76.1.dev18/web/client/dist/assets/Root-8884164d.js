var Yt=Object.defineProperty;var qt=(e,t,n)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ae=(e,t,n)=>(qt(e,typeof t!="symbol"?t+"":t,n),n);import{r as s,j as a,N as Ut,c as I,i as Y,u as jt,a as T,E as _,R as P,$ as Je,b as y,M as Gt,d as Ct,e as se,f as at,g as st,B as Ke,h as Qe,k as kt,l as Pt,L as Xt,S as Ze,m as Jt,n as Kt,o as ut,p as me,q as Qt,s as Tt,t as At,v as q,w as z,x as Zt,y as en,z as Ve,A as dt,C as tn,D as nn,F as ft,O as rn,G as an}from"./index-71398e80.js";import{R as sn}from"./ReportErrors-a3e1b182.js";import{b as on,M as ln,P as mt,E as L,S as cn}from"./SelectEnvironment-d6bd37bc.js";import{o as U,D as ie,y as ce,l as Rt,n as Nt,a as un,u as ve,s as Pe,O as Ae,M as le,p as dn,c as ht,b as pt,X as ue,d as fn,f as Ft,E as Mt,e as te,t as $t,N as mn,g as ot,h as St,S as vt,I as ge,C as hn,i as Te,j as pn,k as vn,m as gn,P as et,q as tt,r as wn,v as xn,w as gt,x as nt}from"./transition-7cc1de49.js";import{C as bn}from"./ChevronRightIcon-7016dc1d.js";import{u as J,M as We}from"./project-1647c629.js";import{M as wt}from"./file-49f2b60f.js";import{u as Z,c as En}from"./editor-7738dbd6.js";import{EnumFileExplorerChange as Ye}from"./context-6d66a801.js";import"./pluralize-20c4f49a.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./SplitPane-7aa47462.js";import"./disclosure-1c14d4dc.js";import"./context-c9a4c85e.js";import"./Input-0c327896.js";import"./ModelLineage-9a36c7db.js";import"./ListboxShow-097350f3.js";import"./SearchList-b383624c.js";import"./PlusIcon-199e142b.js";import"./ChevronDownIcon-638748ac.js";function yn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 01-9.201 2.466l-.312-.311h2.433a.75.75 0 000-1.5H3.989a.75.75 0 00-.75.75v4.242a.75.75 0 001.5 0v-2.43l.31.31a7 7 0 0011.712-3.138.75.75 0 00-1.449-.39zm1.23-3.723a.75.75 0 00.219-.53V2.929a.75.75 0 00-1.5 0V5.36l-.31-.31A7 7 0 003.239 8.188a.75.75 0 101.448.389A5.5 5.5 0 0113.89 6.11l.311.31h-2.432a.75.75 0 000 1.5h4.243a.75.75 0 00.53-.219z",clipRule:"evenodd"}))}const jn=s.forwardRef(yn),Cn=jn;function kn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z",clipRule:"evenodd"}))}const Pn=s.forwardRef(kn),Tn=Pn;function An({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M3 3.5A1.5 1.5 0 014.5 2h6.879a1.5 1.5 0 011.06.44l4.122 4.12A1.5 1.5 0 0117 7.622V16.5a1.5 1.5 0 01-1.5 1.5h-11A1.5 1.5 0 013 16.5v-13zm10.857 5.691a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 00-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}))}const Rn=s.forwardRef(An),Nn=Rn;function Fn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 003 3.5v13A1.5 1.5 0 004.5 18h11a1.5 1.5 0 001.5-1.5V7.621a1.5 1.5 0 00-.44-1.06l-4.12-4.122A1.5 1.5 0 0011.378 2H4.5zm2.25 8.5a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5zm0 3a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z",clipRule:"evenodd"}))}const Mn=s.forwardRef(Fn),$n=Mn;function Sn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495zM10 5a.75.75 0 01.75.75v3.5a.75.75 0 01-1.5 0v-3.5A.75.75 0 0110 5zm0 9a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))}const Ln=s.forwardRef(Sn),Dn=Ln;function On({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M3.75 3A1.75 1.75 0 002 4.75v3.26a3.235 3.235 0 011.75-.51h12.5c.644 0 1.245.188 1.75.51V6.75A1.75 1.75 0 0016.25 5h-4.836a.25.25 0 01-.177-.073L9.823 3.513A1.75 1.75 0 008.586 3H3.75zM3.75 9A1.75 1.75 0 002 10.75v4.5c0 .966.784 1.75 1.75 1.75h12.5A1.75 1.75 0 0018 15.25v-4.5A1.75 1.75 0 0016.25 9H3.75z"}))}const zn=s.forwardRef(On),In=zn;function Hn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M2 10a8 8 0 1116 0 8 8 0 01-16 0zm6.39-2.908a.75.75 0 01.766.027l3.5 2.25a.75.75 0 010 1.262l-3.5 2.25A.75.75 0 018 12.25v-4.5a.75.75 0 01.39-.658z",clipRule:"evenodd"}))}const Bn=s.forwardRef(Hn),Lt=Bn;function _n({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M9.661 2.237a.531.531 0 01.678 0 11.947 11.947 0 007.078 2.749.5.5 0 01.479.425c.069.52.104 1.05.104 1.59 0 5.162-3.26 9.563-7.834 11.256a.48.48 0 01-.332 0C5.26 16.564 2 12.163 2 7c0-.538.035-1.069.104-1.589a.5.5 0 01.48-.425 11.947 11.947 0 007.077-2.75zm4.196 5.954a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"}))}const Vn=s.forwardRef(_n),Wn=Vn;function Yn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{d:"M15.98 1.804a1 1 0 00-1.96 0l-.24 1.192a1 1 0 01-.784.785l-1.192.238a1 1 0 000 1.962l1.192.238a1 1 0 01.785.785l.238 1.192a1 1 0 001.962 0l.238-1.192a1 1 0 01.785-.785l1.192-.238a1 1 0 000-1.962l-1.192-.238a1 1 0 01-.785-.785l-.238-1.192zM6.949 5.684a1 1 0 00-1.898 0l-.683 2.051a1 1 0 01-.633.633l-2.051.683a1 1 0 000 1.898l2.051.684a1 1 0 01.633.632l.683 2.051a1 1 0 001.898 0l.683-2.051a1 1 0 01.633-.633l2.051-.683a1 1 0 000-1.898l-2.051-.683a1 1 0 01-.633-.633L6.95 5.684zM13.949 13.684a1 1 0 00-1.898 0l-.184.551a1 1 0 01-.632.633l-.551.183a1 1 0 000 1.898l.551.183a1 1 0 01.633.633l.183.551a1 1 0 001.898 0l.184-.551a1 1 0 01.632-.633l.551-.183a1 1 0 000-1.898l-.551-.184a1 1 0 01-.633-.632l-.183-.551z"}))}const qn=s.forwardRef(Yn),xt=qn;function Un({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M.99 5.24A2.25 2.25 0 013.25 3h13.5A2.25 2.25 0 0119 5.25l.01 9.5A2.25 2.25 0 0116.76 17H3.26A2.267 2.267 0 011 14.74l-.01-9.5zm8.26 9.52v-.625a.75.75 0 00-.75-.75H3.25a.75.75 0 00-.75.75v.615c0 .414.336.75.75.75h5.373a.75.75 0 00.627-.74zm1.5 0a.75.75 0 00.627.74h5.373a.75.75 0 00.75-.75v-.615a.75.75 0 00-.75-.75H11.5a.75.75 0 00-.75.75v.625zm6.75-3.63v-.625a.75.75 0 00-.75-.75H11.5a.75.75 0 00-.75.75v.625c0 .414.336.75.75.75h5.25a.75.75 0 00.75-.75zm-8.25 0v-.625a.75.75 0 00-.75-.75H3.25a.75.75 0 00-.75.75v.625c0 .414.336.75.75.75H8.5a.75.75 0 00.75-.75zM17.5 7.5v-.625a.75.75 0 00-.75-.75H11.5a.75.75 0 00-.75.75V7.5c0 .414.336.75.75.75h5.25a.75.75 0 00.75-.75zm-8.25 0v-.625a.75.75 0 00-.75-.75H3.25a.75.75 0 00-.75.75V7.5c0 .414.336.75.75.75H8.5a.75.75 0 00.75-.75z",clipRule:"evenodd"}))}const Gn=s.forwardRef(Un),bt=Gn;function Xn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 019 9v.375M10.125 2.25A3.375 3.375 0 0113.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 013.375 3.375M9 15l2.25 2.25L15 12"}))}const Jn=s.forwardRef(Xn),Kn=Jn;function Qn({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const Zn=s.forwardRef(Qn),er=Zn;function tr({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"}))}const nr=s.forwardRef(tr),rr=nr;function ar({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 014.5 9.75h15A2.25 2.25 0 0121.75 12v.75m-8.69-6.44l-2.12-2.12a1.5 1.5 0 00-1.061-.44H4.5A2.25 2.25 0 002.25 6v12a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9a2.25 2.25 0 00-2.25-2.25h-5.379a1.5 1.5 0 01-1.06-.44z"}))}const sr=s.forwardRef(ar),or=sr;function lr({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"}))}const ir=s.forwardRef(lr),Dt=ir;function cr({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285z"}))}const ur=s.forwardRef(cr),dr=ur;function W({title:e,to:t,icon:n,iconActive:r,classActive:l="px-2 bg-neutral-10",disabled:i=!1,children:c,before:u,className:f}){return a.jsx(Ut,{title:e,to:t,className:({isActive:m})=>I("flex items-center",i&&"opacity-50 cursor-not-allowed",m&&Y(i)&&l,f),style:({isActive:m})=>m||i?{pointerEvents:"none"}:{},children:({isActive:m})=>a.jsxs("span",{className:I("flex items-center",m?"font-bold":"font-normal"),children:[u,m?r:n,c]})})}function fr({className:e}){const{errors:t}=jt(),n=T(i=>i.models),r=T(i=>i.modules),l=Array.from(new Set(n.values())).length;return a.jsxs("div",{className:e,children:[r.hasEditor&&a.jsx(W,{title:"File Explorer",to:_.Editor,className:"px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10 text-primary-500 rounded-xl my-1",classActive:"bg-primary-10 text-primary-500",icon:a.jsx(or,{className:"min-w-6 w-6"}),iconActive:a.jsx(In,{className:"min-w-6 w-6"})}),r.hasDocs&&a.jsx(W,{title:"Docs",to:_.Docs,icon:a.jsx(er,{className:"min-w-6 w-6"}),iconActive:a.jsx($n,{className:"min-w-6 w-6"}),className:"relative rounded-xl my-1 px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10 text-neutral-600 dark:text-neutral-300",children:a.jsx("span",{className:"min-w-[1rem] px-1 h-4 py-0.5 text-center text-[9px] absolute bottom-0 right-0 font-black rounded-full bg-primary-500 text-primary-100",children:l})}),r.hasErrors&&a.jsx(W,{title:"Errors",to:_.Errors,className:I("relative px-2 py-1 rounded-xl my-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10",t.size>0?"text-danger-500":"text-neutral-600"),classActive:"px-2 bg-danger-10 text-danger-500",icon:a.jsx(rr,{className:"w-6"}),iconActive:a.jsx(Dn,{className:"w-6"}),disabled:t.size===0,children:t.size>0&&a.jsx("span",{className:"min-w-[1rem] px-1 h-4 py-0.5 text-center text-[9px] absolute bottom-0 right-0 font-black rounded-full bg-danger-500 text-danger-100",children:t.size})}),r.hasPlans&&a.jsx(W,{title:"Plan",to:_.Plan,className:"px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10 text-success-500 rounded-xl my-1",classActive:"bg-success-10 text-success-500",icon:a.jsx(Dt,{className:"w-6"}),iconActive:a.jsx(Lt,{className:"w-6"})}),r.hasTests&&a.jsx(W,{title:"Tests",to:_.Tests,icon:a.jsx(Kn,{className:"w-6"}),iconActive:a.jsx(Nn,{className:"w-6"}),className:"rounded-xl my-1 px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10"}),r.hasAudits&&a.jsx(W,{title:"Audits",to:_.Audits,icon:a.jsx(dr,{className:"w-6"}),iconActive:a.jsx(Wn,{className:"w-6"}),className:"rounded-xl my-1 px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10"}),r.hasData&&a.jsx(W,{title:"Data",to:_.Data,icon:a.jsx(bt,{className:"w-6"}),iconActive:a.jsx(bt,{className:"w-6"}),className:"rounded-xl my-1 px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10 text-neutral-500 dark:text-neutral-300"}),r.hasLineage&&a.jsx(W,{title:"Lineage",to:_.Lineage,icon:a.jsx(xt,{className:"w-6"}),iconActive:a.jsx(xt,{className:"w-6"}),className:"rounded-xl my-1 px-2 py-1 h-10 hover:bg-neutral-5 dark:hover:bg-neutral-10 text-neutral-500 dark:text-neutral-300"})]})}function lt(e,t){let n=s.useRef([]),r=U(e);s.useEffect(()=>{let l=[...n.current];for(let[i,c]of t.entries())if(n.current[i]!==c){let u=r(t,l);return n.current=t,u}},[r,...t])}function mr(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function hr(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}function Ot(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let pr="div";var zt=(e=>(e[e.None=1]="None",e[e.InitialFocus=2]="InitialFocus",e[e.TabLock=4]="TabLock",e[e.FocusLock=8]="FocusLock",e[e.RestoreFocus=16]="RestoreFocus",e[e.All=30]="All",e))(zt||{});function vr(e,t){let n=s.useRef(null),r=ce(n,t),{initialFocus:l,containers:i,features:c=30,...u}=e;Rt()||(c=1);let f=Nt(n);xr({ownerDocument:f},!!(c&16));let m=br({ownerDocument:f,container:n,initialFocus:l},!!(c&2));Er({ownerDocument:f,container:n,containers:i,previousActiveElement:m},!!(c&8));let x=un(),v=U(g=>{let M=n.current;M&&(N=>N())(()=>{ve(x.current,{[Pe.Forwards]:()=>{Ae(M,le.First,{skipElements:[g.relatedTarget]})},[Pe.Backwards]:()=>{Ae(M,le.Last,{skipElements:[g.relatedTarget]})}})})}),D=dn(),j=s.useRef(!1),B={ref:r,onKeyDown(g){g.key=="Tab"&&(j.current=!0,D.requestAnimationFrame(()=>{j.current=!1}))},onBlur(g){let M=Ot(i);n.current instanceof HTMLElement&&M.add(n.current);let N=g.relatedTarget;N instanceof HTMLElement&&N.dataset.headlessuiFocusGuard!=="true"&&(It(M,N)||(j.current?Ae(n.current,ve(x.current,{[Pe.Forwards]:()=>le.Next,[Pe.Backwards]:()=>le.Previous})|le.WrapAround,{relativeTo:g.target}):g.target instanceof HTMLElement&&te(g.target)))}};return P.createElement(P.Fragment,null,!!(c&4)&&P.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:pt.Focusable}),ue({ourProps:B,theirProps:u,defaultTag:pr,name:"FocusTrap"}),!!(c&4)&&P.createElement(ht,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:v,features:pt.Focusable}))}let gr=ie(vr),he=Object.assign(gr,{features:zt}),K=[];hr(()=>{function e(t){t.target instanceof HTMLElement&&t.target!==document.body&&K[0]!==t.target&&(K.unshift(t.target),K=K.filter(n=>n!=null&&n.isConnected),K.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function wr(e=!0){let t=s.useRef(K.slice());return lt(([n],[r])=>{r===!0&&n===!1&&$t(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=K.slice())},[e,K,t]),U(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function xr({ownerDocument:e},t){let n=wr(t);lt(()=>{t||(e==null?void 0:e.activeElement)===(e==null?void 0:e.body)&&te(n())},[t]),fn(()=>{t&&te(n())})}function br({ownerDocument:e,container:t,initialFocus:n},r){let l=s.useRef(null),i=Ft();return lt(()=>{if(!r)return;let c=t.current;c&&$t(()=>{if(!i.current)return;let u=e==null?void 0:e.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===u){l.current=u;return}}else if(c.contains(u)){l.current=u;return}n!=null&&n.current?te(n.current):Ae(c,le.First)===mn.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),l.current=e==null?void 0:e.activeElement})},[r]),l}function Er({ownerDocument:e,container:t,containers:n,previousActiveElement:r},l){let i=Ft();Mt(e==null?void 0:e.defaultView,"focus",c=>{if(!l||!i.current)return;let u=Ot(n);t.current instanceof HTMLElement&&u.add(t.current);let f=r.current;if(!f)return;let m=c.target;m&&m instanceof HTMLElement?It(u,m)?(r.current=m,te(m)):(c.preventDefault(),c.stopPropagation(),te(f)):te(r.current)},!0)}function It(e,t){for(let n of e)if(n.contains(t))return!0;return!1}let it=s.createContext(()=>{});it.displayName="StackContext";var rt=(e=>(e[e.Add=0]="Add",e[e.Remove=1]="Remove",e))(rt||{});function yr(){return s.useContext(it)}function jr({children:e,onUpdate:t,type:n,element:r,enabled:l}){let i=yr(),c=U((...u)=>{t==null||t(...u),i(...u)});return ot(()=>{let u=l===void 0||l===!0;return u&&c(0,n,r),()=>{u&&c(1,n,r)}},[c,n,r,l]),P.createElement(it.Provider,{value:c},e)}function Cr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const kr=typeof Object.is=="function"?Object.is:Cr,{useState:Pr,useEffect:Tr,useLayoutEffect:Ar,useDebugValue:Rr}=Je;function Nr(e,t,n){const r=t(),[{inst:l},i]=Pr({inst:{value:r,getSnapshot:t}});return Ar(()=>{l.value=r,l.getSnapshot=t,qe(l)&&i({inst:l})},[e,r,t]),Tr(()=>(qe(l)&&i({inst:l}),e(()=>{qe(l)&&i({inst:l})})),[e]),Rr(r),r}function qe(e){const t=e.getSnapshot,n=e.value;try{const r=t();return!kr(n,r)}catch{return!0}}function Fr(e,t,n){return t()}const Mr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$r=!Mr,Sr=$r?Fr:Nr,Lr="useSyncExternalStore"in Je?(e=>e.useSyncExternalStore)(Je):Sr;function Dr(e){return Lr(e.subscribe,e.getSnapshot,e.getSnapshot)}function Or(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(l){return r.add(l),()=>r.delete(l)},dispatch(l,...i){let c=t[l].call(n,...i);c&&(n=c,r.forEach(u=>u()))}}}function zr(){let e;return{before({doc:t}){var n;let r=t.documentElement;e=((n=t.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:t,d:n}){let r=t.documentElement,l=r.clientWidth-r.offsetWidth,i=e-l;n.style(r,"paddingRight",`${i}px`)}}}function Ir(){if(!mr())return{};let e;return{before(){e=window.pageYOffset},after({doc:t,d:n,meta:r}){function l(i){return r.containers.flatMap(c=>c()).some(c=>c.contains(i))}n.microTask(()=>{if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let c=St();c.style(t.documentElement,"scroll-behavior","auto"),n.add(()=>n.microTask(()=>c.dispose()))}n.style(t.body,"marginTop",`-${e}px`),window.scrollTo(0,0);let i=null;n.addEventListener(t,"click",c=>{if(c.target instanceof HTMLElement)try{let u=c.target.closest("a");if(!u)return;let{hash:f}=new URL(u.href),m=t.querySelector(f);m&&!l(m)&&(i=m)}catch{}},!0),n.addEventListener(t,"touchmove",c=>{c.target instanceof HTMLElement&&!l(c.target)&&c.preventDefault()},{passive:!1}),n.add(()=>{window.scrollTo(0,window.pageYOffset+e),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}}function Hr(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function Br(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let ee=Or(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:St(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:Br(n)},l=[Ir(),zr(),Hr()];l.forEach(({before:i})=>i==null?void 0:i(r)),l.forEach(({after:i})=>i==null?void 0:i(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ee.subscribe(()=>{let e=ee.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",l=n.count!==0;(l&&!r||!l&&r)&&ee.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&ee.dispatch("TEARDOWN",n)}});function _r(e,t,n){let r=Dr(ee),l=e?r.get(e):void 0,i=l?l.count>0:!1;return ot(()=>{if(!(!e||!t))return ee.dispatch("PUSH",e,n),()=>ee.dispatch("POP",e,n)},[t,e]),i}let Ue=new Map,pe=new Map;function Et(e,t=!0){ot(()=>{var n;if(!t)return;let r=typeof e=="function"?e():e.current;if(!r)return;function l(){var c;if(!r)return;let u=(c=pe.get(r))!=null?c:1;if(u===1?pe.delete(r):pe.set(r,u-1),u!==1)return;let f=Ue.get(r);f&&(f["aria-hidden"]===null?r.removeAttribute("aria-hidden"):r.setAttribute("aria-hidden",f["aria-hidden"]),r.inert=f.inert,Ue.delete(r))}let i=(n=pe.get(r))!=null?n:0;return pe.set(r,i+1),i!==0||(Ue.set(r,{"aria-hidden":r.getAttribute("aria-hidden"),inert:r.inert}),r.setAttribute("aria-hidden","true"),r.inert=!0),l},[e,t])}var Vr=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Vr||{}),Wr=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(Wr||{});let Yr={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Re=s.createContext(null);Re.displayName="DialogContext";function we(e){let t=s.useContext(Re);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,we),n}return t}function qr(e,t,n=()=>[document.body]){_r(e,t,r=>{var l;return{containers:[...(l=r.containers)!=null?l:[],n]}})}function Ur(e,t){return ve(t.type,Yr,e,t)}let Gr="div",Xr=vt.RenderStrategy|vt.Static;function Jr(e,t){var n;let r=ge(),{id:l=`headlessui-dialog-${r}`,open:i,onClose:c,initialFocus:u,__demoMode:f=!1,...m}=e,[x,v]=s.useState(0),D=hn();i===void 0&&D!==null&&(i=(D&Te.Open)===Te.Open);let j=s.useRef(null),B=ce(j,t),g=Nt(j),M=e.hasOwnProperty("open")||D!==null,N=e.hasOwnProperty("onClose");if(!M&&!N)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!M)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!N)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(typeof i!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${i}`);if(typeof c!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${c}`);let d=i?0:1,[V,Ne]=s.useReducer(Ur,{titleId:null,descriptionId:null,panelRef:s.createRef()}),G=U(()=>c(!1)),xe=U(b=>Ne({type:0,id:b})),Q=Rt()?f?!1:d===0:!1,X=x>1,be=s.useContext(Re)!==null,[Fe,Ee]=pn(),{resolveContainers:de,mainTreeNodeRef:ne,MainTreeNode:Me}=vn({portals:Fe,defaultContainers:[(n=V.panelRef.current)!=null?n:j.current]}),$e=X?"parent":"leaf",ye=D!==null?(D&Te.Closing)===Te.Closing:!1,Se=(()=>be||ye?!1:Q)(),Le=s.useCallback(()=>{var b,O;return(O=Array.from((b=g==null?void 0:g.querySelectorAll("body > *"))!=null?b:[]).find(F=>F.id==="headlessui-portal-root"?!1:F.contains(ne.current)&&F instanceof HTMLElement))!=null?O:null},[ne]);Et(Le,Se);let De=(()=>X?!0:Q)(),Oe=s.useCallback(()=>{var b,O;return(O=Array.from((b=g==null?void 0:g.querySelectorAll("[data-headlessui-portal]"))!=null?b:[]).find(F=>F.contains(ne.current)&&F instanceof HTMLElement))!=null?O:null},[ne]);Et(Oe,De);let ze=(()=>!(!Q||X))();gn(de,G,ze);let je=(()=>!(X||d!==0))();Mt(g==null?void 0:g.defaultView,"keydown",b=>{je&&(b.defaultPrevented||b.key===wn.Escape&&(b.preventDefault(),b.stopPropagation(),G()))});let Ie=(()=>!(ye||d!==0||be))();qr(g,Ie,de),s.useEffect(()=>{if(d!==0||!j.current)return;let b=new ResizeObserver(O=>{for(let F of O){let re=F.target.getBoundingClientRect();re.x===0&&re.y===0&&re.width===0&&re.height===0&&G()}});return b.observe(j.current),()=>b.disconnect()},[d,j,G]);let[Ce,He]=ln(),ke=s.useMemo(()=>[{dialogState:d,close:G,setTitleId:xe},V],[d,V,G,xe]),fe=s.useMemo(()=>({open:d===0}),[d]),Be={ref:B,id:l,role:"dialog","aria-modal":d===0?!0:void 0,"aria-labelledby":V.titleId,"aria-describedby":Ce};return P.createElement(jr,{type:"Dialog",enabled:d===0,element:j,onUpdate:U((b,O)=>{O==="Dialog"&&ve(b,{[rt.Add]:()=>v(F=>F+1),[rt.Remove]:()=>v(F=>F-1)})})},P.createElement(et,{force:!0},P.createElement(tt,null,P.createElement(Re.Provider,{value:ke},P.createElement(tt.Group,{target:j},P.createElement(et,{force:!1},P.createElement(He,{slot:fe,name:"Dialog.Description"},P.createElement(he,{initialFocus:u,containers:de,features:Q?ve($e,{parent:he.features.RestoreFocus,leaf:he.features.All&~he.features.FocusLock}):he.features.None},P.createElement(Ee,null,ue({ourProps:Be,theirProps:m,slot:fe,defaultTag:Gr,features:Xr,visible:d===0,name:"Dialog"}))))))))),P.createElement(Me,null))}let Kr="div";function Qr(e,t){let n=ge(),{id:r=`headlessui-dialog-overlay-${n}`,...l}=e,[{dialogState:i,close:c}]=we("Dialog.Overlay"),u=ce(t),f=U(x=>{if(x.target===x.currentTarget){if(xn(x.currentTarget))return x.preventDefault();x.preventDefault(),x.stopPropagation(),c()}}),m=s.useMemo(()=>({open:i===0}),[i]);return ue({ourProps:{ref:u,id:r,"aria-hidden":!0,onClick:f},theirProps:l,slot:m,defaultTag:Kr,name:"Dialog.Overlay"})}let Zr="div";function ea(e,t){let n=ge(),{id:r=`headlessui-dialog-backdrop-${n}`,...l}=e,[{dialogState:i},c]=we("Dialog.Backdrop"),u=ce(t);s.useEffect(()=>{if(c.panelRef.current===null)throw new Error("A <Dialog.Backdrop /> component is being used, but a <Dialog.Panel /> component is missing.")},[c.panelRef]);let f=s.useMemo(()=>({open:i===0}),[i]);return P.createElement(et,{force:!0},P.createElement(tt,null,ue({ourProps:{ref:u,id:r,"aria-hidden":!0},theirProps:l,slot:f,defaultTag:Zr,name:"Dialog.Backdrop"})))}let ta="div";function na(e,t){let n=ge(),{id:r=`headlessui-dialog-panel-${n}`,...l}=e,[{dialogState:i},c]=we("Dialog.Panel"),u=ce(t,c.panelRef),f=s.useMemo(()=>({open:i===0}),[i]),m=U(x=>{x.stopPropagation()});return ue({ourProps:{ref:u,id:r,onClick:m},theirProps:l,slot:f,defaultTag:ta,name:"Dialog.Panel"})}let ra="h2";function aa(e,t){let n=ge(),{id:r=`headlessui-dialog-title-${n}`,...l}=e,[{dialogState:i,setTitleId:c}]=we("Dialog.Title"),u=ce(t);s.useEffect(()=>(c(r),()=>c(null)),[r,c]);let f=s.useMemo(()=>({open:i===0}),[i]);return ue({ourProps:{ref:u,id:r},theirProps:l,slot:f,defaultTag:ra,name:"Dialog.Title"})}let sa=ie(Jr),oa=ie(ea),la=ie(na),ia=ie(Qr),ca=ie(aa),Ht=Object.assign(sa,{Backdrop:oa,Panel:la,Overlay:ia,Title:ca,Description:on});function oe({headline:e,type:t,changes:n,className:r}){const[l,i]=s.useState(!1);return a.jsx(gt,{onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},className:"relative flex",children:()=>a.jsxs(a.Fragment,{children:[a.jsx("span",{className:I("transition-all flex min-w-[1rem] h-4 text-center mx-0.5 px-1 rounded-full text-[10px] font-black text-neutral-100 cursor-default border border-inherit",t===L.Add&&"bg-success-500 border-success-500",t===L.Remove&&"bg-danger-500 border-danger-500",t===L.Direct&&"bg-secondary-500 border-secondary-500",t===L.Indirect&&"bg-warning-500 border-warning-500",t===L.Metadata&&"bg-neutral-400 border-neutral-400",t===L.Default&&"bg-neutral-600 border-neutral-600",r),children:n.length}),a.jsx(nt,{show:l,as:s.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",children:a.jsx(gt.Panel,{className:"absolute top-6 right-0 z-10 transform flex p-2 bg-theme-lighter shadow-xl focus:ring-2 ring-opacity-5 rounded-lg ",children:a.jsx(mt,{headline:e,type:t,className:"w-full h-full max-w-[50vw] max-h-[40vh] overflow-hidden overflow-y-auto hover:scrollbar scrollbar--vertical",children:a.jsx(mt.Default,{type:t,changes:n})})})})]})})}function ua(){const e=y(l=>l.planOverview),[t,n]=s.useState(e);return s.useEffect(()=>{Y(e.isEmpty)&&e.isFinished&&n(new Gt(e))},[e]),(Y(e.isLatest)||e.isFetching)&&t.hasUpdates?a.jsxs("span",{className:"flex group items-center bg-neutral-5 dark:bg-neutral-20 px-1 py-1 rounded-full",children:[Ct(t.hasChanges)&&a.jsx(yt,{className:"mr-2",children:"Changes"}),se(t.added)&&a.jsx(oe,{headline:"Added",type:L.Add,changes:t.added,className:"-mr-2 group-hover:mr-0 z-[5]"}),se(t.direct)&&a.jsx(oe,{headline:"Directly Modified",type:L.Direct,changes:t.direct,className:"-mr-2 group-hover:mr-0 z-[4]"}),se(t.indirect)&&a.jsx(oe,{headline:"Indirectly Modified",type:L.Indirect,changes:t.indirect,className:"-mr-2 group-hover:mr-0 z-[3]"}),se(t.metadata)&&a.jsx(oe,{headline:"Metadata",type:L.Metadata,changes:t.metadata,className:"-mr-2 group-hover:mr-0 z-[2]"}),se(t.removed)&&a.jsx(oe,{headline:"Removed",type:L.Remove,changes:t.removed,className:"-mr-2 group-hover:mr-0 z-[1]"}),se(t.backfills)?a.jsx(oe,{headline:"Backfills",type:L.Default,changes:t.backfills,className:"ml-4 group-hover:ml-2 z-[6]"}):a.jsx("div",{className:"ml-2 group-hover:ml-2 z-[6]"})]}):a.jsx(yt,{className:"pr-2 pl-0.5 py-1 rounded-full bg-neutral-5 dark:bg-neutral-20 text-neutral-500 dark:text-neutral-300",children:"No Changes"})}function yt({className:e,children:t}){const n=T(f=>f.environment),r=T(f=>f.addRemoteEnvironments),l=y(f=>f.planAction),{refetch:i}=at(),{refetch:c}=st(n.name,{planOptions:{skip_tests:!0,include_unmodified:!0}});function u(f){const{environments:m,default_target_environment:x,pinned_environments:v}=f??{};Pt(m)&&r(Object.values(m),x,v)}return a.jsxs("p",{className:I("flex items-center text-xs text-neutral-600 dark:text-neutral-300 font-bold text-center whitespace-nowrap",e),children:[a.jsx(Ke,{className:"w-5 h-5 !p-0 !m-0 !ml-0.5 !mr-1 border-none !rounded-full bg-neutral-10 dark:bg-neutral-20",variant:Qe.Info,size:kt.sm,disabled:l.isProcessing,onClick:f=>{f.stopPropagation(),i().then(({data:m})=>{c(),u(m)})},children:a.jsx(Cn,{className:"text-neutral-500 dark:text-neutral-300 w-4 h-4"})}),t]})}function Bt({children:e}){return a.jsxs(Xt,{className:"inline-block",children:[a.jsx(Ze,{className:"w-3 h-3 border border-neutral-10 mr-2"}),a.jsx("span",{className:"inline-block text-xs",children:e})]})}let Ge;function da(){const e=T(d=>d.modules),t=T(d=>d.environment),n=T(d=>d.models),r=y(d=>d.planAction),l=y(d=>d.planApply),i=y(d=>d.planOverview),c=y(d=>d.planCancel),u=y(d=>d.setPlanApply),f=y(d=>d.setPlanOverview),m=y(d=>d.setPlanCancel),x=y(d=>d.setPlanAction),v=y(d=>d.resetPlanTrackers),D=y(d=>d.clearPlanApply),{isFetching:j}=Jt(t.name),{isFetching:B}=Kt(),{isFetching:g}=at(),{refetch:M,isFetching:N}=st(t.name,{planOptions:{skip_tests:!0,include_unmodified:!0}});return s.useEffect(()=>{n.size>0&&Y(r.isProcessing)&&Y(r.isRunningTask)&&(v(),D(),M())},[n,t]),s.useEffect(()=>{N&&(i.isFetching=!0,f(i)),j&&(l.isFetching=!0,u(l)),B&&(c.isFetching=!0,m(c))},[N,j,B]),s.useEffect(()=>{clearTimeout(Ge);const d=ut.getPlanAction({planOverview:i,planApply:l,planCancel:c});d===me.Done&&r.isRunningTask||d===r.value||(Ge=setTimeout(()=>{x(new ut({value:d})),Ge=void 0},Qt([me.Running,me.RunningTask,me.Cancelling,me.Applying],d)?0:500))},[i,l,c]),a.jsx("div",{className:"h-8 flex w-full items-center justify-end text-neutral-500",children:g?a.jsx(Bt,{children:"Loading Environments..."}):a.jsxs(a.Fragment,{children:[Y(e.hasOnlyPlans)&&Y(e.hasOnlyPlansAndErrors)&&a.jsx(W,{title:r.isProcessing?r.displayStatus(i):"Plan",to:_.Plan,icon:r.isProcessing?a.jsx(Ze,{variant:Qe.Success,className:"w-3 py-1"}):a.jsx(Dt,{className:I("w-5",i.isFailed?"text-danger-500 dark:text-danger-100":"text-success-100")}),iconActive:r.isProcessing?a.jsx(Ze,{variant:Qe.Success,className:"w-3 py-1"}):a.jsx(Lt,{className:I("w-5",i.isFailed?"text-danger-500 dark:text-danger-100":"text-success-100")}),before:a.jsx("p",{className:I("block mx-1 text-xs font-bold whitespace-nowrap",i.isFailed?"text-danger-500 dark:text-danger-100":"text-success-100"),children:r.isProcessing?r.displayStatus(i):"Plan"}),className:I("px-2 rounded-full py-0.5 mr-1",i.isFailed?"bg-danger-10 dark:bg-danger-500":"bg-success-500"),classActive:I(i.isFailed?"bg-danger-10 dark:bg-danger-500":"bg-success-500")}),a.jsx("div",{className:"flex justify-center items-center min-w-[6rem] max-w-full",children:a.jsx(cn,{className:"border-none mx-2 w-full",size:kt.sm,showAddEnvironment:!0,disabled:N||r.isProcessing||t.isInitialProd})}),a.jsx(ua,{})]})})}function fa(){const e=Tt();return a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>e(-1),className:"inline-block text-neutral-700 dark:text-neutral-300 text-xs hover:bg-neutral-5 dark:hover:bg-neutral-10 px-1 py-1 rounded-full",children:a.jsx(Tn,{className:"min-w-4 h-4"})}),a.jsx("button",{onClick:()=>e(1),className:"inline-block text-neutral-700 dark:text-neutral-300 text-xs hover:bg-neutral-5 dark:hover:bg-neutral-10 px-1 py-1 rounded-full",children:a.jsx(bn,{className:"min-w-4 h-4"})})]})}function ma(){const e=T(n=>n.modules),{isFetching:t}=At();return a.jsxs("div",{className:I("min-w-[10rem] px-2 h-8 w-full flex items-center",e.showHistoryNavigation?"justify-between":"justify-end"),children:[e.showHistoryNavigation&&a.jsx(fa,{}),t?a.jsx(Bt,{children:"Loading Models..."}):e.hasPlans&&a.jsx(da,{}),e.hasErrors&&a.jsx(sn,{})]})}const _t=2e4,ha=3e3;class pa{constructor(t,n){ae(this,"channels",new Map);ae(this,"eventSource");ae(this,"timerId");ae(this,"source");ae(this,"delay",_t);this.source=t,this.delay=n??this.delay,this.setEventSource()}listen(t){t.addEventListener("error",n=>{this.reconnect(ha)}),t.addEventListener("ping",n=>{this.reconnect(this.delay)})}cleanup(){var t;this.channels.forEach((n,r)=>{var l;q(n)&&((l=this.eventSource)==null||l.removeEventListener(r,n))}),(t=this.eventSource)==null||t.close(),this.eventSource=void 0}resubscribe(){this.channels.forEach((t,n)=>{var r;q(t)&&((r=this.eventSource)==null||r.addEventListener(n,t))})}reconnect(t){clearTimeout(this.timerId),this.timerId=setTimeout(()=>{console.log(`Reconnecting Event Source ${this.source}`),this.cleanup(),this.setEventSource(),this.resubscribe()},t)}getEventSource(){return new EventSource(this.source,{withCredentials:!0})}setEventSource(){this.eventSource=this.getEventSource(),this.listen(this.eventSource)}addChannel(t,n){var l;const r=this.getChannelHandler(t,n);(l=this.eventSource)==null||l.addEventListener(t,r),this.channels.set(t,r)}removeChannel(t){var r;const n=this.getChannel(t);q(n)&&((r=this.eventSource)==null||r.removeEventListener(t,n),this.channels.delete(t))}hasChannel(t){return q(this.getChannel(t))}getChannel(t){return this.channels.get(t)}getChannelHandler(t,n){return r=>{if(this.reconnect(this.delay),!(z(t)||z(n)||z(r.data)))try{n(JSON.parse(r.data))}catch(l){console.warn(l)}}}}const Xe=new pa("/api/events",_t);function va(){return(e,t)=>({subscribe(){q(e)&&q(t)&&Y(Xe.hasChannel(e))&&Xe.addChannel(e,t)},unsubscribe(){Xe.removeChannel(e)}})}function ga({show:e,children:t,afterLeave:n,onClose:r=()=>{}}){return a.jsx(nt,{appear:!0,show:e,as:s.Fragment,afterLeave:n,children:a.jsxs(Ht,{as:"div",className:"relative z-50",onClose:r,children:[a.jsx("div",{className:"fixed inset-0 bg-overlay opacity-90"}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:a.jsx(nt.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:t})})})]})})}function H({show:e,children:t,onClose:n,afterLeave:r}){return a.jsx(ga,{show:e,onClose:n,afterLeave:r,children:a.jsx(Ht.Panel,{className:"w-[30rem] transform rounded-xl bg-theme text-left align-middle shadow-xl transition-all",children:t})})}function wa({children:e}){return a.jsx("div",{className:"py-4 px-5 m-2",children:e})}function xa({children:e}){return a.jsx("h2",{className:"font-bold text-xl mb-2",children:e})}function ba({children:e}){return a.jsx("h4",{className:"font-bold",children:e})}function Ea({children:e}){return a.jsx("p",{className:"text-sm",children:e})}function ya({children:e}){return a.jsx("div",{className:"flex justify-end items-center py-3 px-3",children:e})}function ja({details:e}){return a.jsx("ul",{className:"mt-2 p-4 bg-warning-10 rounded-md max-h-[20vh] overflow-y-auto hover:scrollbar scrollbar--vertical",children:e.map(t=>a.jsx("li",{className:"text-sm",children:t},t))})}H.Headline=xa;H.Tagline=ba;H.Description=Ea;H.Actions=ya;H.Main=wa;H.Details=ja;function Ya(){const e=Zt(),t=Tt(),{removeError:n,addError:r}=jt(),l=va(),i=y(o=>o.planApply),c=y(o=>o.planOverview),u=y(o=>o.planCancel),f=y(o=>o.setPlanApply),m=y(o=>o.setPlanOverview),x=y(o=>o.setPlanCancel),v=T(o=>o.modules),D=T(o=>o.environment),j=T(o=>o.showConfirmation),B=T(o=>o.confirmations),g=T(o=>o.setShowConfirmation),M=T(o=>o.removeConfirmation),N=T(o=>o.setModels),d=T(o=>o.addRemoteEnvironments),V=J(o=>o.files),Ne=J(o=>o.selectedFile),G=J(o=>o.setProject),xe=J(o=>o.setFiles),Q=J(o=>o.refreshFiles),X=J(o=>o.findArtifactByPath),be=J(o=>o.setTests),Fe=J(o=>o.setActiveRange),Ee=Z(o=>o.storedTabs),de=Z(o=>o.storedTabId),ne=Z(o=>o.selectTab),Me=Z(o=>o.createTab),$e=Z(o=>o.addTabs),ye=Z(o=>o.closeTab),Se=Z(o=>o.inTabs),{refetch:Le,cancel:De}=At(),{refetch:Oe,cancel:ze}=en(),{refetch:je,cancel:Ie}=at(),{refetch:Ce,cancel:He}=st(D.name,{planOptions:{skip_tests:!0,include_unmodified:!0}}),ke=s.useCallback(function(p){var C,E;i.update(p,c),f(i);const A=Ct((C=p.meta)==null?void 0:C.done)&&((E=p.meta)==null?void 0:E.status)!==Ve.init;u.isFinished||u.isRunning||Y(A)||je().then(({data:$})=>{Ce(),ct($)})},[u,c]);s.useEffect(()=>{const o=l("plan-apply",ke);return v.hasPlans&&o.subscribe(),()=>{v.hasPlans&&o.unsubscribe()}},[ke]),s.useEffect(()=>{Le().then(({data:w})=>fe(w));const o=l("errors",Be),p=l("tests",b),A=l("models",fe),C=l("file",O),E=l("format-file",Vt),$=l("plan-overview",F),k=l("plan-cancel",re);return A.subscribe(),E.subscribe(),C.subscribe(),v.hasPlans&&(je().then(({data:w})=>ct(w)),$.subscribe(),k.subscribe()),v.hasErrors&&o.subscribe(),v.hasTests&&p.subscribe(),v.hasFiles&&Oe().then(({data:w})=>{if(z(w))return;const S=new We(w),R=S.allFiles;Wt(R),xe(R),G(S)}),()=>{De(),A.unsubscribe(),E==null||E.unsubscribe(),C==null||C.unsubscribe(),v.hasPlans&&($.unsubscribe(),k.unsubscribe(),Ie(),He()),v.hasErrors&&(o==null||o.unsubscribe()),v.hasTests&&(p==null||p.unsubscribe()),v.hasFiles&&ze()}},[]),s.useEffect(()=>{e.pathname===_.Home&&t(v.defaultNavigationRoute(),{replace:!0})},[e]),s.useEffect(()=>{g(B.length>0)},[B]);function fe(o){q(o)&&(n(dt.Models),N(o))}function Be(o){r(dt.General,o)}function b(o){be(o)}function O({changes:o,directories:p}){var A,C;o.sort(E=>E.change===Ye.Deleted?-1:1),o.forEach(({change:E,path:$,file:k})=>{var w,S;if(E===Ye.Modified){const R=V.get($);if(z(R)||z(k))return;R.update(k)}if(E===Ye.Deleted){const R=X($)??V.get($);if(z(R))return;R instanceof We&&((w=R.parent)==null||w.removeDirectory(R)),R instanceof wt&&((S=R.parent)==null||S.removeFile(R),Se(R)&&ye(R))}});for(const E in p){const $=p[E],k=X(E);z(k)||((A=$.directories)==null||A.forEach(w=>{const S=X(w.path);z(S)&&k.addDirectory(new We(w,k))}),(C=$.files)==null||C.forEach(w=>{const S=V.get(E);z(S)&&k.addFile(new wt(w,k))}),k.directories.sort((w,S)=>w.name>S.name?1:-1),k.files.sort((w,S)=>w.name>S.name?1:-1))}Q(),Fe()}function F(o){c.update(o),m(c)}function re(o){var p,A;u.update(o),x(u),!(an((p=o.meta)==null?void 0:p.done)||((A=o.meta)==null?void 0:A.status)===Ve.init)&&Ce()}function ct(o){const{environments:p,default_target_environment:A,pinned_environments:C}=o??{};Pt(p)&&d(Object.values(p),A,C)}function Vt(o){const p=V.get(o.path);q(p)&&(p.isFormatted=o.status===Ve.success,Q())}function _e(o){var p;(p=o==null?void 0:o.cancel)==null||p.call(o),g(!1)}function Wt(o){if(tn(Ee))return;const p=Ee.map(({id:C,content:E})=>{const $=o.find(w=>w.id===C)??En(C),k=Me($);return k.file.content=E??k.file.content??"",k}),A=p.find(C=>C.file.id===de);$e(p),q(A)&&z(Ne)&&ne(A)}const h=B[0];return a.jsxs(nn.Page,{layout:"horizontal",children:[v.showModuleNavigation&&a.jsxs(a.Fragment,{children:[a.jsx(fr,{className:"overflow-hidden py-1 px-2 flex flex-col items-center"}),a.jsx(ft,{orientation:"vertical"})]}),a.jsxs("div",{className:"flex flex-col overflow-hidden w-full h-full",children:[v.showNavigation&&a.jsxs(a.Fragment,{children:[a.jsx(ma,{}),a.jsx(ft,{})]}),a.jsx(rn,{}),a.jsxs(H,{show:j,onClose:()=>{_e(h)},afterLeave:()=>{M()},onKeyDown:o=>{o.key==="Escape"&&_e(h)},children:[a.jsxs(H.Main,{children:[(h==null?void 0:h.headline)!=null&&a.jsx(H.Headline,{children:h==null?void 0:h.headline}),(h==null?void 0:h.description)!=null&&a.jsx(H.Description,{children:h==null?void 0:h.description}),h==null?void 0:h.children]}),a.jsxs(H.Actions,{children:[a.jsx(Ke,{className:"font-bold",size:"md",variant:"danger",onClick:o=>{var p;o.stopPropagation(),(p=h==null?void 0:h.action)==null||p.call(h),g(!1)},children:(h==null?void 0:h.yesText)??"Confirm"}),a.jsx(Ke,{size:"md",variant:"alternative",onClick:o=>{o.stopPropagation(),_e(h)},children:(h==null?void 0:h.noText)??"Cancel"})]})]})]})]})}export{Ya as default};
