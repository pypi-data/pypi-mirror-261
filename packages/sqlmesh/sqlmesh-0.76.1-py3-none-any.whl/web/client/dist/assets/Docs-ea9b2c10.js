import{r,a as M,Y as H,j as e,Z as D,P as V,c as m,d as $,a0 as k,b as q,i as P,I as _,J as G,o as J,s as f,K,E as C,B as L,g as F,h as I}from"./index-a3eab52a.js";import{M as U,u as Y,L as Z,C as W,a as O}from"./context-03170372.js";import{v as b,M as X,P as ee}from"./disclosure-c4eee161.js";import se from"./ModelLineage-616d4793.js";import{S as A}from"./SplitPane-f7e0aa98.js";import{r as v,T as te}from"./Tab-dda25612.js";import{E as le}from"./file-8dee95f5.js";import"./_commonjs-dynamic-modules-302442b1.js";import"./Input-b4b72d4b.js";import"./editor-6a61ab57.js";import"./project-84d6bd70.js";import"./transition-f0ceb270.js";import"./ListboxShow-31043db1.js";import"./SearchList-ad327207.js";function ae({title:t,titleId:s,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":s},n),t?r.createElement("title",{id:s},t):null,r.createElement("path",{d:"M3.28 2.22a.75.75 0 00-1.06 1.06L5.44 6.5H2.75a.75.75 0 000 1.5h4.5A.75.75 0 008 7.25v-4.5a.75.75 0 00-1.5 0v2.69L3.28 2.22zM13.5 2.75a.75.75 0 00-1.5 0v4.5c0 .414.336.75.75.75h4.5a.75.75 0 000-1.5h-2.69l3.22-3.22a.75.75 0 00-1.06-1.06L13.5 5.44V2.75zM3.28 17.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 101.06 1.06zM13.5 14.56l3.22 3.22a.75.75 0 101.06-1.06l-3.22-3.22h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0v-2.69z"}))}const ne=r.forwardRef(ae),R=ne;function re({title:t,titleId:s,...n},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":s},n),t?r.createElement("title",{id:s},t):null,r.createElement("path",{d:"M13.28 7.78l3.22-3.22v2.69a.75.75 0 001.5 0v-4.5a.75.75 0 00-.75-.75h-4.5a.75.75 0 000 1.5h2.69l-3.22 3.22a.75.75 0 001.06 1.06zM2 17.25v-4.5a.75.75 0 011.5 0v2.69l3.22-3.22a.75.75 0 011.06 1.06L4.56 16.5h2.69a.75.75 0 010 1.5h-4.5a.747.747 0 01-.75-.75zM12.22 13.28l3.22 3.22h-2.69a.75.75 0 000 1.5h4.5a.747.747 0 00.75-.75v-4.5a.75.75 0 00-1.5 0v2.69l-3.22-3.22a.75.75 0 10-1.06 1.06zM3.5 4.56l3.22 3.22a.75.75 0 001.06-1.06L4.56 3.5h2.69a.75.75 0 000-1.5h-4.5a.75.75 0 00-.75.75v4.5a.75.75 0 001.5 0V4.56z"}))}const ie=r.forwardRef(re),Q=ie,S=function({model:s,withModel:n=!0,withDescription:a=!0,withColumns:u=!0,withCode:j=!0,withQuery:w=!0}){const h=M(i=>i.setLastSelectedModel),{refetch:c,cancel:d}=H(s.name);return r.useEffect(()=>(c().then(({data:i})=>{s.update(i),h(s)}),()=>{d()}),[s.name]),e.jsxs(y,{children:[n&&e.jsx(E,{headline:"Model",defaultOpen:!0,children:e.jsxs("ul",{className:"w-full",children:[e.jsx(p,{name:"Path",value:s.path.split(D).slice(0,-1).join(D)}),e.jsx(p,{name:"Name",title:s.displayName,value:V(s.displayName,50,25)}),e.jsx(p,{name:"Dialect",value:s.dialect}),e.jsx(p,{name:"Type",value:s.type}),Object.entries(s.details??{}).map(([i,g])=>e.jsx(p,{name:i.replaceAll("_"," "),value:g,isCapitalize:!0},i))]})}),a&&e.jsx(E,{headline:"Description",defaultOpen:!0,children:s.description??"No description"}),u&&e.jsx(E,{headline:"Columns",defaultOpen:!0,children:e.jsx(U,{className:"max-h-[15rem]",nodeId:s.name,columns:s.columns,disabled:s.isModelPython,withHandles:!1,withSource:!1,withDescription:!0,limit:10})})]})};function oe({headline:t}){return e.jsx("div",{className:"text-md font-bold whitespace-nowrap w-full",id:t,children:e.jsx("h3",{className:"py-2",children:t})})}function ce(){return e.jsx(y,{className:"font-bold whitespace-nowrap w-full h-full",children:e.jsx("div",{className:"flex items-center justify-center w-full h-full",children:"Documentation Not Found"})})}function y({children:t,className:s}){return e.jsx("div",{className:m("w-full h-full rounded-xl",s),children:e.jsx("div",{className:"w-full h-full rounded-xl",children:e.jsx("div",{className:"w-full h-full overflow-scroll scrollbar scrollbar--vertical scrollbar--horizontal",children:t})})})}function E({children:t,className:s,headline:n,defaultOpen:a=!1}){return e.jsx("div",{className:"px-1 text-neutral-500 dark:text-neutral-400",children:e.jsx(b,{defaultOpen:a,children:({open:u})=>e.jsxs(e.Fragment,{children:[e.jsxs(b.Button,{className:m("flex items-center justify-between rounded-lg text-left w-full hover:bg-neutral-5 px-3 mb-1 overflow-hidden",s),children:[e.jsx(oe,{headline:n}),e.jsx("div",{children:u?e.jsx(X,{className:"w-4 text-neutral-50"}):e.jsx(ee,{className:"w-4 text-neutral-50"})})]}),e.jsx(b.Panel,{className:"pb-2 px-2 overflow-hidden",children:e.jsx("div",{className:"px-2 mb-2 text-xs",children:t})})]})})})}function p({className:t,name:s,value:n,isHighlighted:a=!1,isCapitalize:u=!1,children:j,title:w}){return e.jsxs("li",{className:m("w-full border-b last:border-b-0 border-neutral-10 py-1 mb-1 text-neutral-500 dark:text-neutral-400",t),children:[$(n)?e.jsxs(e.Fragment,{children:[e.jsx("strong",{title:w,className:"mr-2 text-xs capitalize",children:s}),n.map((h,c)=>e.jsx("ul",{className:"w-full flex flex-col whitespace-nowrap p-1 m-1 rounded-md overflow-hidden",children:Object.entries(h).map(([d,i])=>e.jsxs("li",{className:"flex items-center justify-between text-xs border-b border-neutral-10 last:border-b-0 py-1",children:[e.jsxs("strong",{className:"mr-2",children:[d,":"]}),e.jsx("p",{className:"text-xs",children:T(i)})]},d))},c))]}):e.jsxs("div",{className:"flex justify-between text-xs whitespace-nowrap",children:[e.jsx("strong",{className:m("mr-2",u&&"capitalize",a&&"text-brand-500"),children:s}),e.jsx("p",{className:"text-xs rounded text-neutral-500 dark:text-neutral-400",children:T(n)})]}),e.jsx("p",{className:"text-xs ",children:j})]})}S.NotFound=ce;S.Container=y;const ue=S;function T(t){const s=new Date(t),n=k(t)&&!isNaN(s.getTime()),a=typeof t=="boolean";return a&&q(t)?"True":a&&P(t)?"False":n?_(s):String(t)}function Pe(){const{modelName:t}=G(),s=J(),n=M(l=>l.models),a=M(l=>l.lastSelectedModel),[u,j]=r.useState([65,35]),[w,h]=r.useState([50,50]),[c,d]=r.useState(!1),[i,g]=r.useState(!1),o=f(t)||t===(a==null?void 0:a.name)?a:n.get(encodeURI(t)),z=f(o)?[]:Y(o.path,l=>{N==null||N(l.name)});function N(l){const x=n.get(l);f(x)||s(C.DocsModels+"/"+x.name)}function B(l){console.log(l==null?void 0:l.message)}return e.jsx("div",{className:"flex overflow-auto w-full h-full",children:f(o)?e.jsx(K,{link:C.Docs,description:f(t)?void 0:`Model ${t} Does Not Exist`,message:"Back To Docs"}):e.jsx(Z,{showColumns:!0,handleClickModel:N,handleError:B,children:e.jsxs(A,{className:"flex h-full w-full",sizes:c||i?[100,0]:w,minSize:0,snapOffset:0,onDragEnd:l=>h(l),children:[e.jsx("div",{className:"flex flex-col h-full",children:e.jsxs(A,{direction:"vertical",sizes:c?[0,100]:i?[100,0]:u,minSize:0,snapOffset:0,className:"flex flex-col w-full h-full overflow-hidden",onDragEnd:l=>j(l),children:[e.jsxs("div",{className:"flex flex-col h-full relative overflow-hidden",children:[e.jsx(L,{className:m("absolute top-0 right-1 h-8 w-8 !px-0 !bg-light !text-neutral-500 shadow-xl z-10"),variant:F.Info,size:I.sm,onClick:l=>{l.stopPropagation(),g(x=>P(x))},children:c?e.jsx(R,{className:"w-4 h-4"}):e.jsx(Q,{className:"w-4 h-4"})}),e.jsx(W,{path:o.path,children:({file:l})=>e.jsxs(v.Group,{children:[e.jsx(te,{list:["Source Code",o.isModelSQL&&"Compiled Query"].filter(Boolean),className:"!justify-center"}),e.jsxs(v.Panels,{className:"h-full w-full overflow-hidden text-xs",children:[e.jsx(v.Panel,{unmount:!1,className:"w-full h-full",children:e.jsx(O,{content:l.content,type:l.extension,extensions:z})}),o.isModelSQL&&e.jsx(v.Panel,{className:"w-full h-full",children:e.jsx(O,{type:le.SQL,content:o.sql??"",extensions:z})})]})]})},o.path)]}),e.jsxs("div",{className:"flex flex-col h-full relative overflow-hidden",children:[e.jsx(L,{className:m("absolute top-9 right-1 h-8 w-8 !px-0 !bg-light !text-neutral-500 shadow-xl z-10"),variant:F.Info,size:I.sm,onClick:l=>{l.stopPropagation(),d(x=>P(x))},children:c?e.jsx(R,{className:"w-4 h-4"}):e.jsx(Q,{className:"w-4 h-4"})}),e.jsx(se,{model:o})]})]})}),e.jsx("div",{className:"flex flex-col h-full",children:e.jsx(ue,{model:o,withQuery:o.isModelSQL})})]})})})}export{Pe as default};
