{% extends "registration/base.html" %}

{% load i18n %}
{% load widget_tweaks %}

{% block registration_titletag %}
  {% trans 'Password reset' %}
{% endblock registration_titletag %}

{% block registration_metadescription %}{% trans 'Password reset' %}{% endblock registration_metadescription %}

{% block registration_title %}
  {% if validlink %}
    <h1>{% trans 'Enter new password' %}</h1>
  {% else %}
    <h1>{% trans 'Password reset unsuccessful' %}</h1>
  {% endif %}
{% endblock %}

{% block registration_content %}
  <div class="row">
    <div class="col-6">
      {% if validlink %}
        <p class="form-intro">
          {% trans "Please enter your new password twice so we can verify you typed it in correctly." %}
        </p>

        {% if form.new_password1.errors or form.new_password2.errors %}
          <p class="alert alert-danger">
            {{ form.new_password1.errors }}
            {{ form.new_password2.errors }}
          </p>
        {% endif %}

        <form action="" method="post" class="form form-new-password mb-5">
          {% csrf_token %}

          <div class="form-group form-field-password1">
            <label for="{{ form.new_password1.auto_id }}" class="form-label">{{ form.new_password1.label }}</label>
            {% render_field form.new_password1 class+="form-control" %}
          </div>

          <div class="form-group form-field-password2">
            <label for="{{ form.new_password2.auto_id }}" class="form-label">{{ form.new_password2.label }}</label>
            {% render_field form.new_password2 class+="form-control" %}
          </div>

          <input type="submit" value="{% trans 'Change my password' %}" class="btn btn-primary">
        </form>

      {% else %}
        <p class="alert alert-warning">
          {% trans "The password reset link was invalid, possibly because it has already been used. Please request a new password reset." %}
        </p>
      {% endif %}
    </div>
  </div>
{% endblock %}
