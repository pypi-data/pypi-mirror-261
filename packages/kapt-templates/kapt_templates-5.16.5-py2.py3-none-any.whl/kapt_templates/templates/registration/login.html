{% extends "registration/base.html" %}

{% load i18n %}

{% block registration_titletag %}
  {% trans 'Login' %}
{% endblock registration_titletag %}

{% block registration_metadescription %}{% trans 'Login' %}{% endblock registration_metadescription %}

{% block registration_title %}
  <h1>{% trans 'Login' %}</h1>
{% endblock %}

{% block registration_content %}
  <div class="row">
    <div class="col-6">
      {% if form.errors %}
        <p class="alert alert-danger mt-5">
          {% trans "Your username and password didn't match. Please try again." %}
        </p>
      {% endif %}

      {% if next %}
        {% if user.is_authenticated %}
          <p class="alert alert-warning">
            {% trans "Your account doesn't have access to this page. To proceed, please login with an account that has access." %}
          </p>
        {% else %}
          <p class="alert alert-info">
            {% trans 'Please login to see this page.' %}
          </p>
        {% endif %}
      {% endif %}

      <form method="post" action="{% url 'login' %}" class="form form-login">
        {% csrf_token %}
        <div class="form-group form-field-username">
          <label for="{{ form.username.auto_id }}" class="form-label">{{ form.username.label }}</label>
          <input type="text" id="{{ form.username.auto_id }}" name="{{ form.username.html_name }}" class="form-control" autofocus required />
        </div>

        <div class="form-group form-field-password">
          <label for="{{ form.password.auto_id }}" class="form-label">{{ form.password.label }}</label>
          <input type="password" id="{{ form.password.auto_id }}" name="{{ form.password.html_name }}" class="form-control" required />
        </div>

        <input type="submit" value="{% trans 'Login' %}" class="btn btn-primary mt-5 mb-5">
        <input type="hidden" name="next" value="{{ next }}">
      </form>

      {% block password_reset_link %}
        {# Assumes you setup the password_reset view in your URLconf #}
        <p>
          <a href="{% url 'password_reset' %}">{% trans 'Lost password?' %}</a>
        </p>
      {% endblock password_reset_link %}
    </div>
  </div>
{% endblock %}
