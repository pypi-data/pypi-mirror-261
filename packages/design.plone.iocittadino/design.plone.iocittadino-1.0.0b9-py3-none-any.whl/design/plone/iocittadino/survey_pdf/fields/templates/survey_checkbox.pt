<tal:element tal:define="
  field python: options.get('field', '');
  value python: options.get('value', '');
  lang python: options.get('lang', '');
  ">
  <tal:element tal:condition="field">
    <div class="survey_field survey_checkbox">
      <p class="survey_field_title survey_checkbox_title">${python: type(field.get('title', '')) == dict and field['title'].get(lang, '') or field.get('title')}: </p>
      <div class="survey_field survey_checkbox_values_block">
        <ul>
          <tal:element tal:repeat="selected value">
            <li>
              <tal:element tal:define="selected_text python: [i['text'] for i in field['choices'] if i['value'] == selected]">
                <p
                  class="survey_field_value survey_checkbox_value"
                  tal:content="python: selected_text and selected_text[0] and type(selected_text[0]) == dict and (selected_text[0].get(lang, '') or selected_text[0].get('default', '')) or ''">
                  </p><br>
              </tal:element>
            </li>
          </tal:element>
        </ul>
      </div>
    </div>
  </tal:element>
</tal:element>

