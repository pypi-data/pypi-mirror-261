# automatically generated by auxilium
{% include 'base_arg.jinja2' -%}
FROM {{ opts.base | default("python:"~opts.version~"-"~(opts.get("debian") | default("slim-bullseye", true)), true) }}

{% if opts.base -%}
USER root:root
{% include 'apt_install.jinja2' -%}
{% else -%}
ENV PYTHONUNBUFFERED 1
ENV DEBIAN_FRONTEND noninteractive

{% include 'apt_install.jinja2' -%}
{% include 'extra_script.jinja2' -%}

# create non-root-user
RUN addgroup --gid 5000 container
RUN useradd --create-home --uid 5000 --gid 5000 --shell /bin/bash container
ENV PATH=$PATH:/home/container/.local/bin
{%- endif %}
USER container:container
WORKDIR /home/container

{% if aux.pip.use_uv and not opts.base -%}
RUN pip install uv --no-cache
RUN uv venv --seed
ENV PATH=/home/container/.venv/bin:$PATH
{% endif-%}
{% include 'pip_install.jinja2' -%}

{% include 'entry_points_add.jinja2' -%}

CMD []
{% block custom %}{% endblock %}
